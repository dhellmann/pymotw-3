<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>site &#8211; Site-wide configuration - Python Module of the Week</title>

<link rel="stylesheet" href="../_static/default.css" 
    type="text/css" />
<style>
    body {
        margin: 8px;
    }
    .highlight {
        background-color: white;
        border: 0;
    }
    .highlight pre {
        background-color: white;
    }
</style>

<link href="../_static/css/leaves.css" rel="stylesheet" type="text/css" />
<link rel="alternate" type="application/atom+xml"
      title="Doug Hellmann"
      href="http://feeds.feedburner.com/DougHellmann" />
<link rel="alternate" type="application/atom+xml"
      title="Doug Hellmann Project Releases"
      href="http://feeds.feedburner.com/DougHellmann-Releases" />
<link rel="alternate" type="application/atom+xml"
      title="Doug Hellmann Links"
      href="http://feeds.feedburner.com/DougHellmannLinkBlog" />



<script type="text/javascript">
  var DOCUMENTATION_OPTIONS = {
      URL_ROOT:    '../',
      VERSION:     '1.133',
      COLLAPSE_MODINDEX: false,
      FILE_SUFFIX: '.html'
  };
</script>

<script type="text/javascript" src="../_static/jquery.js"></script>
<script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="contents" title="Global table of contents" href="../contents.html" />
    <link rel="index" title="Global index" href="../genindex.html" />
    <link rel="top" title="Python Module of the Week" href="../index.html" />
    <link rel="up" title="Python Runtime Services" href="../runtime_services.html" />
    <link rel="next" title="sys – System-specific Configuration" href="../sys/index.html" />
    <link rel="prev" title="inspect – Inspect live objects" href="../inspect/index.html" />

<meta name="verify-v1" content="5saTcOa2HLac4V85yUg3SARfun1PqT5Upu7IR/6fpv4="/>
</head>
<body>
    
<div id="container">
    
<div id="header">
  <a href="/"><h1>PyMOTW</h1></a>
  <p></p>
</div>

<div id="sidebar_left_wrapper">

<div id="navigation"> 
	<ul id="navlist">
		<li><a href="../index.html">Home</a></li>
		<li><a href="https://doughellmann.com/" target="_">Blog</a></li>
		<li><a href="https://doughellmann.com/python-standard-library-by-example">The Book</a></li>
		<li><a href="../about.html">About</a></li>
		<li><a href="/2/genindex.html">Site Index</a></li>
	</ul>
</div>


  <div id="sidebar_left">
      <p>If you find this information useful, consider picking up a copy of my book,
      <i><a href="http://doughellmann.com/python-standard-library-by-example">The Python Standard Library By
      Example</a></i>.</p>
  </div>

</div>


<div id="sidebar">
  <h3>Page Contents</h3>
  <ul>
<li><a class="reference internal" href="#">site &#8211; Site-wide configuration</a><ul>
<li><a class="reference internal" href="#import-path">Import Path</a></li>
<li><a class="reference internal" href="#user-directories">User Directories</a></li>
<li><a class="reference internal" href="#path-configuration-files">Path Configuration Files</a></li>
<li><a class="reference internal" href="#sitecustomize">sitecustomize</a></li>
<li><a class="reference internal" href="#usercustomize">usercustomize</a></li>
<li><a class="reference internal" href="#disabling-site">Disabling site</a></li>
</ul>
</li>
</ul>
    <h3>Navigation</h3>
      <p>
    <a href="../contents.html"><strong>Table of Contents</strong></a><br/>
    
          <a href="../inspect/index.html" title="previous chapter"><strong>Previous:</strong> inspect &#8211; Inspect live objects</a><br/>
          <a href="../sys/index.html" title="next chapter"><strong>Next:</strong> sys &#8211; System-specific Configuration</a><br/>
      </p>
    
      <h3>This Page</h3>
      <p>
      <a href="../_sources/site/index.txt"
               rel="nofollow">Show Source</a>
      </p><h3>Examples</h3>

<p>The output from all the example programs from PyMOTW has been
generated with Python 2.7.8, unless otherwise noted. Some
of the features described here may not be available in earlier
versions of Python.</p>

<p>If you are looking for examples that work under Python 3, please
refer to the <a href="/3/">PyMOTW-3</a> section of the site.</p><p><a target="new" href="https://doughellmann.com/blog/the-python-3-standard-library-by-example/"><img src="../_static/images/py3-book-cover.jpg"><br>Now available for Python 3!</a></p>
<p><a target="new" href="https://doughellmann.com/blog/the-python-standard-library-by-example/"><img src="../_static/images/py2-book-cover.jpg"><br>Buy the book!</a></p>
</div>


<div id="content">

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../sys/index.html" title="sys – System-specific Configuration"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../inspect/index.html" title="inspect – Inspect live objects"
             accesskey="P">previous</a> |</li>
        <li><a href="../contents.html">PyMOTW</a> &raquo;</li>
          <li><a href="../runtime_services.html" accesskey="U">Python Runtime Services</a> &raquo;</li> 
      </ul>
    </div>

  <div class="section" id="module-site">
<span id="site-site-wide-configuration"></span><h1>site &#8211; Site-wide configuration<a class="headerlink" href="#module-site" title="Permalink to this headline">¶</a></h1>
<p>The <a class="reference internal" href="#module-site" title="site: Site-wide configuration"><tt class="xref py py-mod docutils literal"><span class="pre">site</span></tt></a> module handles site-specific configuration, especially
the <a class="reference internal" href="../sys/imports.html#sys-path"><em>import path</em></a>.</p>
<div class="section" id="import-path">
<h2>Import Path<a class="headerlink" href="#import-path" title="Permalink to this headline">¶</a></h2>
<p><a class="reference internal" href="#module-site" title="site: Site-wide configuration"><tt class="xref py py-mod docutils literal"><span class="pre">site</span></tt></a> is automatically imported each time the interpreter starts
up.  On import, it extends <a class="reference internal" href="../sys/imports.html#sys-path"><em>sys.path</em></a> with
site-specific names constructed by combining the prefix values
<a class="reference internal" href="../sys/interpreter.html#sys-prefix"><em>sys.prefix</em></a> and <a class="reference internal" href="../sys/interpreter.html#sys-prefix"><em>sys.exec_prefix</em></a>
with several suffixes.  The prefix values used are saved in the
module-level variable <tt class="docutils literal"><span class="pre">PREFIXES</span></tt> for reference later.  Under
Windows, the suffixes are an empty string and <tt class="docutils literal"><span class="pre">lib/site-packages</span></tt>.
For Unix-like platforms, the values are
<tt class="docutils literal"><span class="pre">lib/python$version/site-packages</span></tt> and <tt class="docutils literal"><span class="pre">lib/site-python</span></tt>.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">platform</span>
<span class="kn">import</span> <span class="nn">site</span>

<span class="k">if</span> <span class="s">&#39;Windows&#39;</span> <span class="ow">in</span> <span class="n">platform</span><span class="o">.</span><span class="n">platform</span><span class="p">():</span>
    <span class="n">SUFFIXES</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s">&#39;&#39;</span><span class="p">,</span>
        <span class="s">&#39;lib/site-packages&#39;</span><span class="p">,</span>
        <span class="p">]</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">SUFFIXES</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s">&#39;lib/python</span><span class="si">%s</span><span class="s">/site-packages&#39;</span> <span class="o">%</span> <span class="n">sys</span><span class="o">.</span><span class="n">version</span><span class="p">[:</span><span class="mi">3</span><span class="p">],</span>
        <span class="s">&#39;lib/site-python&#39;</span><span class="p">,</span>
        <span class="p">]</span>

<span class="k">print</span> <span class="s">&#39;Path prefixes:&#39;</span>
<span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">site</span><span class="o">.</span><span class="n">PREFIXES</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">&#39;  &#39;</span><span class="p">,</span> <span class="n">p</span>

<span class="k">for</span> <span class="n">prefix</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">site</span><span class="o">.</span><span class="n">PREFIXES</span><span class="p">)):</span>
    <span class="k">print</span>
    <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="n">SUFFIXES</span><span class="p">:</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">prefix</span><span class="p">,</span> <span class="n">suffix</span><span class="p">)</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">sep</span><span class="p">)</span>
        <span class="k">print</span> <span class="n">path</span>
        <span class="k">print</span> <span class="s">&#39;   exists:&#39;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="k">print</span> <span class="s">&#39;  in path:&#39;</span><span class="p">,</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">path</span>
</pre></div>
</div>
<p>Each of the paths resulting from the combinations is tested, and those
that exist are added to <a class="reference internal" href="../sys/imports.html#sys-path"><em>sys.path</em></a>.</p>
<div class="highlight-python"><div class="highlight"><pre>$ python site_import_path.py
Path prefixes:
   /Library/Frameworks/Python.framework/Versions/2.7
   /Library/Frameworks/Python.framework/Versions/2.7

/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages
   exists: True
  in path: True
/Library/Frameworks/Python.framework/Versions/2.7/lib/site-python
   exists: False
  in path: False
</pre></div>
</div>
</div>
<div class="section" id="user-directories">
<h2>User Directories<a class="headerlink" href="#user-directories" title="Permalink to this headline">¶</a></h2>
<p>In addition to the global site-packages paths, <a class="reference internal" href="#module-site" title="site: Site-wide configuration"><tt class="xref py py-mod docutils literal"><span class="pre">site</span></tt></a> is
responsible for adding the user-specific locations to the import path.
The user-specific paths are all based on the <tt class="docutils literal"><span class="pre">USER_BASE</span></tt> directory,
which usually located in a part of the filesystem owned (and writable)
by the current user.  Inside the <tt class="docutils literal"><span class="pre">USER_BASE</span></tt> is a site-packages
directory, with the path accessible as <tt class="docutils literal"><span class="pre">USER_SITE</span></tt>.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">site</span>

<span class="k">print</span> <span class="s">&#39;Base:&#39;</span><span class="p">,</span> <span class="n">site</span><span class="o">.</span><span class="n">USER_BASE</span>
<span class="k">print</span> <span class="s">&#39;Site:&#39;</span><span class="p">,</span> <span class="n">site</span><span class="o">.</span><span class="n">USER_SITE</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">USER_SITE</span></tt> path name is created using the same
platform-specific values described above.</p>
<div class="highlight-python"><div class="highlight"><pre>$ python site_user_base.py

Base: /Users/dhellmann/.local
Site: /Users/dhellmann/.local/lib/python2.7/site-packages
</pre></div>
</div>
<p>The user base directory can be set through the <tt class="docutils literal"><span class="pre">PYTHONUSERBASE</span></tt>
environment variable, and has platform-specific defaults
(<tt class="docutils literal"><span class="pre">~/Python$version/site-packages</span></tt> for Windows and <tt class="docutils literal"><span class="pre">~/.local</span></tt> for
non-Windows).</p>
<p>You can check the <tt class="docutils literal"><span class="pre">USER_BASE</span></tt> value from outside of your Python
program by running <a class="reference internal" href="#module-site" title="site: Site-wide configuration"><tt class="xref py py-mod docutils literal"><span class="pre">site</span></tt></a> from the command line.  <a class="reference internal" href="#module-site" title="site: Site-wide configuration"><tt class="xref py py-mod docutils literal"><span class="pre">site</span></tt></a>
will give you the name of the directory whether or not it exists, but
it is only added to the import path when it does.</p>
<div class="highlight-python"><div class="highlight"><pre>$ python -m site --user-base


$ python -m site --user-site


$ PYTHONUSERBASE=/tmp/$USER python -m site --user-base


$ PYTHONUSERBASE=/tmp/$USER python -m site --user-site
</pre></div>
</div>
<p>The user directory is disabled under some circumstances that would
pose security issues.  For example, if the process is running with a
different effective user or group id than the actual user that started
it.  Your application can check the setting by examining
<tt class="docutils literal"><span class="pre">ENABLE_USER_SITE</span></tt>.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">site</span>

<span class="n">status</span> <span class="o">=</span> <span class="p">{</span>
    <span class="bp">None</span><span class="p">:</span><span class="s">&#39;Disabled for security&#39;</span><span class="p">,</span>
    <span class="bp">True</span><span class="p">:</span><span class="s">&#39;Enabled&#39;</span><span class="p">,</span>
    <span class="bp">False</span><span class="p">:</span><span class="s">&#39;Disabled by command-line option&#39;</span><span class="p">,</span>
    <span class="p">}</span>

<span class="k">print</span> <span class="s">&#39;Flag   :&#39;</span><span class="p">,</span> <span class="n">site</span><span class="o">.</span><span class="n">ENABLE_USER_SITE</span>
<span class="k">print</span> <span class="s">&#39;Meaning:&#39;</span><span class="p">,</span> <span class="n">status</span><span class="p">[</span><span class="n">site</span><span class="o">.</span><span class="n">ENABLE_USER_SITE</span><span class="p">]</span>
</pre></div>
</div>
<p>The user directory can also be explicitly disabled on the command line
with <em class="xref std std-option">-s</em>.</p>
<div class="highlight-python"><div class="highlight"><pre>$ python site_enable_user_site.py

Flag   : True
Meaning: Enabled

$ python -s site_enable_user_site.py

Flag   : False
Meaning: Disabled by command-line option
</pre></div>
</div>
</div>
<div class="section" id="path-configuration-files">
<h2>Path Configuration Files<a class="headerlink" href="#path-configuration-files" title="Permalink to this headline">¶</a></h2>
<p>As paths are added to the import path, they are also scanned for <em>path
configuration files</em>.  A path configuration file is a plain text file
with the extension <tt class="docutils literal"><span class="pre">.pth</span></tt>.  Each line in the file can take one of
four forms:</p>
<ol class="arabic simple">
<li>A full or relative path to another location that should be added to
the import path.</li>
<li>A Python statement to be executed.  All such lines must begin with
an <tt class="docutils literal"><span class="pre">import</span></tt> statement.</li>
<li>Blank lines are ignored.</li>
<li>A line starting with <tt class="docutils literal"><span class="pre">#</span></tt> is treated as a comment and ignored.</li>
</ol>
<p>Path configuration files can be used to extend the import path to look
in locations that would not have been added automatically.  For
example, <a class="reference external" href="http://packages.python.org/distribute">Distribute</a> adds a path to <tt class="docutils literal"><span class="pre">easy-install.pth</span></tt> when it
installs a package in &#8220;develop&#8221; mode using <tt class="docutils literal"><span class="pre">python</span> <span class="pre">setup.py</span>
<span class="pre">develop</span></tt>.</p>
<p>The function for extending <tt class="docutils literal"><span class="pre">sys.path</span></tt> is public, so we can use it in
example programs to show how the path configuration files work.  Given
a directory <tt class="docutils literal"><span class="pre">with_modules</span></tt> containing the file <tt class="docutils literal"><span class="pre">mymodule.py</span></tt> with
this <tt class="docutils literal"><span class="pre">print</span></tt> statement showing how the module was imported:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">os</span>
<span class="k">print</span> <span class="s">&#39;Loaded&#39;</span><span class="p">,</span> <span class="n">__name__</span><span class="p">,</span> <span class="s">&#39;from&#39;</span><span class="p">,</span> <span class="n">__file__</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">())</span><span class="o">+</span><span class="mi">1</span><span class="p">:]</span>
</pre></div>
</div>
<p>This script shows how <tt class="xref py py-func docutils literal"><span class="pre">addsitedir()</span></tt> extends the import path so
the interpreter can find the desired module.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">site</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="n">script_directory</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">__file__</span><span class="p">)</span>
<span class="n">module_directory</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">script_directory</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">mymodule</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">,</span> <span class="n">err</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">&#39;Could not import mymodule:&#39;</span><span class="p">,</span> <span class="n">err</span>

<span class="k">print</span>
<span class="n">before_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
<span class="n">site</span><span class="o">.</span><span class="n">addsitedir</span><span class="p">(</span><span class="n">module_directory</span><span class="p">)</span>
<span class="k">print</span> <span class="s">&#39;New paths:&#39;</span>
<span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="p">[</span><span class="n">before_len</span><span class="p">:]:</span>
    <span class="k">print</span> <span class="s">&#39;  &#39;</span><span class="p">,</span> <span class="n">p</span>

<span class="k">print</span>
<span class="kn">import</span> <span class="nn">mymodule</span>
</pre></div>
</div>
<p>After the directory containing the module is added to <tt class="docutils literal"><span class="pre">sys.path</span></tt>,
the script can import <tt class="xref py py-mod docutils literal"><span class="pre">mymodule</span></tt> without issue.</p>
<div class="highlight-python"><div class="highlight"><pre>$ python site_addsitedir.py with_modules

Could not import mymodule: No module named mymodule

New paths:
   /Users/dhellmann/Documents/PyMOTW/src/PyMOTW/site/with_modules

Loaded mymodule from with_modules/mymodule.py
</pre></div>
</div>
<p>If the directory given to <tt class="xref py py-func docutils literal"><span class="pre">addsitedir()</span></tt> includes any files
matching the pattern <tt class="docutils literal"><span class="pre">*.pth</span></tt>, they are loaded as path configuration
files.  For example, if we create <tt class="docutils literal"><span class="pre">with_pth/pymotw.pth</span></tt> containing:</p>
<div class="highlight-python"><div class="highlight"><pre># Add a single subdirectory to the path.
./subdir
</pre></div>
</div>
<p>and copy <tt class="docutils literal"><span class="pre">mymodule.py</span></tt> to <tt class="docutils literal"><span class="pre">with_pth/subdir/mymodule.py</span></tt>, then we
can import it by adding <tt class="docutils literal"><span class="pre">with_pth</span></tt> as a site directory, even though
the module is not in that directory.</p>
<div class="highlight-python"><div class="highlight"><pre>$ python site_addsitedir.py with_pth

Could not import mymodule: No module named mymodule

New paths:
   /Users/dhellmann/Documents/PyMOTW/src/PyMOTW/site/with_pth
   /Users/dhellmann/Documents/PyMOTW/src/PyMOTW/site/with_pth/subdir

Loaded mymodule from with_pth/subdir/mymodule.py
</pre></div>
</div>
<p>If a site directory contains multiple <tt class="docutils literal"><span class="pre">.pth</span></tt> files, they are
processed in alphabetical order.</p>
<div class="highlight-python"><div class="highlight"><pre>$ ls -F with_multiple_pth

a.pth
b.pth
from_a/
from_b/

$ cat with_multiple_pth/a.pth

./from_a

$ cat with_multiple_pth/b.pth

./from_b
</pre></div>
</div>
<p>In this case, the module is found in <tt class="docutils literal"><span class="pre">with_multiple_pth/from_a</span></tt>
because <tt class="docutils literal"><span class="pre">a.pth</span></tt> is read before <tt class="docutils literal"><span class="pre">b.pth</span></tt>.</p>
<div class="highlight-python"><div class="highlight"><pre>$ python site_addsitedir.py with_multiple_pth

Could not import mymodule: No module named mymodule

New paths:
   /Users/dhellmann/Documents/PyMOTW/src/PyMOTW/site/with_multiple_pth
   /Users/dhellmann/Documents/PyMOTW/src/PyMOTW/site/with_multiple_pth/from_a
   /Users/dhellmann/Documents/PyMOTW/src/PyMOTW/site/with_multiple_pth/from_b

Loaded mymodule from with_multiple_pth/from_a/mymodule.py
</pre></div>
</div>
<span class="target" id="module-sitecustomize"></span></div>
<div class="section" id="sitecustomize">
<h2>sitecustomize<a class="headerlink" href="#sitecustomize" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="#module-site" title="site: Site-wide configuration"><tt class="xref py py-mod docutils literal"><span class="pre">site</span></tt></a> module is also responsible for loading site-wide
customization defined by the local site owner in a
<a class="reference internal" href="#module-sitecustomize" title="sitecustomize: Site-specific configuration"><tt class="xref py py-mod docutils literal"><span class="pre">sitecustomize</span></tt></a> module.  Uses for <a class="reference internal" href="#module-sitecustomize" title="sitecustomize: Site-specific configuration"><tt class="xref py py-mod docutils literal"><span class="pre">sitecustomize</span></tt></a> include
extending the import path and <a class="reference external" href="http://nedbatchelder.com/blog/201001/running_code_at_python_startup.html">enabling coverage</a>,
profiling, or other development tools.</p>
<p>For example, this <tt class="docutils literal"><span class="pre">sitecustomize.py</span></tt> script extends the import path
with a directory based on the current platform.  The platform-specific
path in <tt class="docutils literal"><span class="pre">/opt/python</span></tt> is added to the import path, so any packages
installed there can be imported.  A system like this is useful for
sharing packages containing compiled extension modules between hosts
on a network via a shared filesystem.  Only the <tt class="docutils literal"><span class="pre">sitecustomize.py</span></tt>
script needs to be installed on each host, and the other packages can
be accessed from the file server.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">print</span> <span class="s">&#39;Loading sitecustomize.py&#39;</span>

<span class="kn">import</span> <span class="nn">site</span>
<span class="kn">import</span> <span class="nn">platform</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s">&#39;/opt&#39;</span><span class="p">,</span> <span class="s">&#39;python&#39;</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">version</span><span class="p">[:</span><span class="mi">3</span><span class="p">],</span> <span class="n">platform</span><span class="o">.</span><span class="n">platform</span><span class="p">())</span>
<span class="k">print</span> <span class="s">&#39;Adding new path&#39;</span><span class="p">,</span> <span class="n">path</span>
                    
<span class="n">site</span><span class="o">.</span><span class="n">addsitedir</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    
</pre></div>
</div>
<p>A simple script can be used to show that <tt class="docutils literal"><span class="pre">sitecustomize.py</span></tt> is
imported before Python starts running your own code.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">sys</span>

<span class="k">print</span> <span class="s">&#39;Running main program&#39;</span>

<span class="k">print</span> <span class="s">&#39;End of path:&#39;</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
<p>Since <a class="reference internal" href="#module-sitecustomize" title="sitecustomize: Site-specific configuration"><tt class="xref py py-mod docutils literal"><span class="pre">sitecustomize</span></tt></a> is meant for system-wide configuration, it
should be installed somewere in the default path (usally in the
<tt class="docutils literal"><span class="pre">site-packages</span></tt> directory).  This example sets <tt class="docutils literal"><span class="pre">PYTHONPATH</span></tt>
explicitly to ensure the module is picked up.</p>
<div class="highlight-python"><div class="highlight"><pre>$ PYTHONPATH=with_sitecustomize python with_sitecustomize/site_sitecusto\
mize.py

Loading sitecustomize.py
Adding new path /opt/python/2.7/Darwin-11.4.2-x86_64-i386-64bit
Running main program
End of path: /opt/python/2.7/Darwin-11.4.2-x86_64-i386-64bit
</pre></div>
</div>
<span class="target" id="module-usercustomize"></span></div>
<div class="section" id="usercustomize">
<h2>usercustomize<a class="headerlink" href="#usercustomize" title="Permalink to this headline">¶</a></h2>
<p>Similar to <a class="reference internal" href="#module-sitecustomize" title="sitecustomize: Site-specific configuration"><tt class="xref py py-mod docutils literal"><span class="pre">sitecustomize</span></tt></a>, the <a class="reference internal" href="#module-usercustomize" title="usercustomize: User-specific configuration"><tt class="xref py py-mod docutils literal"><span class="pre">usercustomize</span></tt></a> module can
be used to set up user-specific settings each time the interpreter
starts up.  <a class="reference internal" href="#module-usercustomize" title="usercustomize: User-specific configuration"><tt class="xref py py-mod docutils literal"><span class="pre">usercustomize</span></tt></a> is loaded after <a class="reference internal" href="#module-sitecustomize" title="sitecustomize: Site-specific configuration"><tt class="xref py py-mod docutils literal"><span class="pre">sitecustomize</span></tt></a>,
so site-wide customizations can be overridden.</p>
<p>In environments where a user&#8217;s home directory is shared on several
servers running different operating systems or versions, the standard
user directory mechanism may not work for user-specific installations
of packages.  In these cases, platform-specific directory tree can be
used instead.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">print</span> <span class="s">&#39;Loading usercustomize.py&#39;</span>

<span class="kn">import</span> <span class="nn">site</span>
<span class="kn">import</span> <span class="nn">platform</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s">&#39;~&#39;</span><span class="p">,</span> <span class="s">&#39;python&#39;</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">version</span><span class="p">[:</span><span class="mi">3</span><span class="p">],</span> <span class="n">platform</span><span class="o">.</span><span class="n">platform</span><span class="p">()))</span>
<span class="k">print</span> <span class="s">&#39;Adding new path&#39;</span><span class="p">,</span> <span class="n">path</span>
                    
<span class="n">site</span><span class="o">.</span><span class="n">addsitedir</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    
</pre></div>
</div>
<p>Another simple script, similar to the one used for
<a class="reference internal" href="#module-sitecustomize" title="sitecustomize: Site-specific configuration"><tt class="xref py py-mod docutils literal"><span class="pre">sitecustomize</span></tt></a>, can be used to show that <tt class="docutils literal"><span class="pre">usercustomize.py</span></tt> is
imported before Python starts running your own code.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">sys</span>

<span class="k">print</span> <span class="s">&#39;Running main program&#39;</span>

<span class="k">print</span> <span class="s">&#39;End of path:&#39;</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
<p>Since <a class="reference internal" href="#module-usercustomize" title="usercustomize: User-specific configuration"><tt class="xref py py-mod docutils literal"><span class="pre">usercustomize</span></tt></a> is meant for user-specific configuration
for a user, it should be installed somewhere in the user&#8217;s default
path, but not on the site-wide path. The default <tt class="docutils literal"><span class="pre">USER_BASE</span></tt>
directory is a good location.  This example sets <tt class="docutils literal"><span class="pre">PYTHONPATH</span></tt>
explicitly to ensure the module is picked up.</p>
<div class="highlight-python"><div class="highlight"><pre>$ PYTHONPATH=with_usercustomize python with_usercustomize/site_usercusto\
mize.py

Loading usercustomize.py
Adding new path /Users/dhellmann/python/2.7/Darwin-11.4.2-x86_64-i386-64bit
Running main program
End of path: /Users/dhellmann/python/2.7/Darwin-11.4.2-x86_64-i386-64bit
</pre></div>
</div>
<p>When the user site directory feature is disabled, <a class="reference internal" href="#module-usercustomize" title="usercustomize: User-specific configuration"><tt class="xref py py-mod docutils literal"><span class="pre">usercustomize</span></tt></a>
is not imported, whether it is located in the user site directory or
elsewhere.</p>
<div class="highlight-python"><div class="highlight"><pre>$ PYTHONPATH=with_usercustomize python -s with_usercustomize/site_usercu\
stomize.py

Running main program
End of path: /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages
</pre></div>
</div>
</div>
<div class="section" id="disabling-site">
<h2>Disabling site<a class="headerlink" href="#disabling-site" title="Permalink to this headline">¶</a></h2>
<p>To maintain backwards-compatibility with versions of Python from
before the automatic import was added, the interpreter accepts an
<em class="xref std std-option">-S</em> option.</p>
<div class="highlight-python"><div class="highlight"><pre>$ python -S site_import_path.py
Path prefixes:
   sys.prefix     : /Library/Frameworks/Python.framework/Versions/2.7
   sys.exec_prefix: /Library/Frameworks/Python.framework/Versions/2.7

/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages
   exists: True
  in path: False
/Library/Frameworks/Python.framework/Versions/2.7/lib/site-python
   exists: False
  in path: False
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><a class="reference external" href="http://docs.python.org/2.7/library/site.html">site</a></dt>
<dd>The standard library documentation for this module.</dd>
<dt><a class="reference internal" href="../sys/imports.html#sys-imports"><em>Modules and Imports</em></a></dt>
<dd>Description of how the import path defined in <a class="reference internal" href="../sys/index.html#module-sys" title="sys: System-specific configuration"><tt class="xref py py-mod docutils literal"><span class="pre">sys</span></tt></a> works.</dd>
<dt><a class="reference external" href="http://nedbatchelder.com/blog/201001/running_code_at_python_startup.html">Running code at Python startup</a></dt>
<dd>Post from Ned Batchelder discussing ways to cause the Python
interpreter to run your custom initialization code before
starting the main program execution.</dd>
</dl>
</div>
</div>
</div>


    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../sys/index.html" title="sys – System-specific Configuration"
             >next</a> |</li>
        <li class="right" >
          <a href="../inspect/index.html" title="inspect – Inspect live objects"
             >previous</a> |</li>
        <li><a href="../contents.html">PyMOTW</a> &raquo;</li>
          <li><a href="../runtime_services.html" >Python Runtime Services</a> &raquo;</li> 
      </ul>
    </div>


</div>

<div id="footer">
 
<p>
    &copy; Copyright <a rel="author" href="../about.html">Doug Hellmann</a>.
    | <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/us/" rel="license"><img alt="Creative Commons License" style="border-width:0; align: center;" width="80" height="15" src="http://i.creativecommons.org/l/by-nc-sa/3.0/us/80x15.png"/></a>
    | Last updated on Jul 11, 2020.
   | Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
   | Design based on "Leaves" by <a href="http://smallpark.org">SmallPark</a>
   | <a href="http://www.dreamhost.com/r.cgi?1246820/green.cgi?pymotw.com">
<img border="0" alt="Green Web Hosting! This site hosted by DreamHost."
src="https://secure.newdream.net/green4.gif" height="15" width="80" /></a></p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-38546875-1', 'pymotw.com');
  ga('send', 'pageview');

</script>


</div>

</div>

</body>
</html>
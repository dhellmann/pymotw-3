<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>xmlrpc.server — An XML-RPC server &mdash; PyMOTW 3</title>

    <link rel="stylesheet" href="../_static/pure-min.css" type="text/css">
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/font-awesome/css/font-awesome.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pymotw.css" type="text/css">

    <link rel="shortcut icon" type="image/png" href="../_static/favicon.png">

    <link rel="alternate" type="application/atom+xml"
          title="Doug Hellmann"
          href="http://feeds.doughellmann.com/DougHellmann" />
    <link rel="alternate" type="application/atom+xml"
          title="PyMOTW Updates"
          href="http://feeds.doughellmann.com/PyMOTW" />

    <meta name="verify-v1" content="5saTcOa2HLac4V85yUg3SARfun1PqT5Upu7IR/6fpv4="/>

    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@pymotw" />
    <meta name="twitter:title" content="Python 3 Module of the Week" />
    <meta name="twitter:description" content="xmlrpc.server — An XML-RPC server" />
    <meta name="twitter:image" content="https://pymotw.com/3/_static/logo-large.png" />

  </head>
  <body>

    <div class="pure-menu pure-menu-open pure-menu-horizontal" id="site-menu">
      <a class="pure-menu-heading" href="../index.html"><img src="../_static/logo.png"> PyMOTW-3</a>

      <ul id="top-menu">
        <li class="pure-menu-selected"><a href="../py-modindex.html"><i class="fa fa-list fa-lg"></i> Module Index</a></li>
        <li class="pure-menu-selected"><a href="../genindex.html"><i class="fa fa-italic fa-lg"></i> Index</a></li>
        <li class="pure-menu-selected"><a class="sociallink" href="http://www.twitter.com/pymotw"
       title="Twitter">
      <i class="fa fa-twitter fa-lg"></i></a></a>
        <li class="pure-menu-selected"><a class="sociallink" href="http://feeds.doughellmann.com/PyMOTW"
       title="Subscribe via RSS">
      <i class="fa fa-rss-square fa-lg"></i></a></li>
      </ul>

    </div>

    <div class="pure-menu pure-menu-open pure-menu-vertical" id="breadcrumbs-menu">
      
      <ul id="breadcrumbs">
        <li class="pure-menu-selected"><a href="../internet_protocols.html"><i class="fa fa-arrow-circle-up"></i> The Internet</a></li>
      </ul>
    </div>

    <div class="pure-g-r" id="content-container">

      <div class="pure-u-3-4">
        <div class="content">
          
  <div class="section" id="module-xmlrpc.server">
<span id="xmlrpc-server-an-xml-rpc-server"></span><h1>xmlrpc.server — An XML-RPC server<a class="headerlink" href="#module-xmlrpc.server" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Purpose:</th><td class="field-body">Implements an XML-RPC server.</td>
</tr>
</tbody>
</table>
<p>The <code class="docutils literal notranslate"><span class="pre">xmlrpc.server</span></code> module contains classes for creating
cross-platform, language-independent servers using the XML-RPC
protocol. Client libraries exist for many other languages besides
Python, making XML-RPC an easy choice for building RPC-style services.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">All of the examples provided here include a client module as well
to interact with the demonstration server. To run the examples,
use two separate shell windows, one for the server and one for the
client.</p>
</div>
<div class="section" id="a-simple-server">
<h2>A Simple Server<a class="headerlink" href="#a-simple-server" title="Permalink to this headline">¶</a></h2>
<p>This simple server example exposes a single function that takes the
name of a directory and returns the contents. The first step is to
create the <code class="docutils literal notranslate"><span class="pre">SimpleXMLRPCServer</span></code> instance and tell it where to
listen for incoming requests (‘localhost’ port 9000 in this
case). Then a function is defined to be part of the service, and
registered so the server knows how to call it. The final step is to
put the server into an infinite loop receiving and responding to
requests.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This implementation has obvious security implications.  Do not run
it on a server on the open Internet or in any environment where
security might be an issue.</p>
</div>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">xmlrpc_function.py</span><a class="headerlink" href="#id1" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">xmlrpc.server</span> <span class="k">import</span> <span class="n">SimpleXMLRPCServer</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="c1"># Set up logging</span>
<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>

<span class="n">server</span> <span class="o">=</span> <span class="n">SimpleXMLRPCServer</span><span class="p">(</span>
    <span class="p">(</span><span class="s1">&#39;localhost&#39;</span><span class="p">,</span> <span class="mi">9000</span><span class="p">),</span>
    <span class="n">logRequests</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>


<span class="c1"># Expose a function</span>
<span class="k">def</span> <span class="nf">list_contents</span><span class="p">(</span><span class="n">dir_name</span><span class="p">):</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;list_contents(</span><span class="si">%s</span><span class="s1">)&#39;</span><span class="p">,</span> <span class="n">dir_name</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">dir_name</span><span class="p">)</span>


<span class="n">server</span><span class="o">.</span><span class="n">register_function</span><span class="p">(</span><span class="n">list_contents</span><span class="p">)</span>

<span class="c1"># Start the server</span>
<span class="k">try</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Use Control-C to exit&#39;</span><span class="p">)</span>
    <span class="n">server</span><span class="o">.</span><span class="n">serve_forever</span><span class="p">()</span>
<span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Exiting&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>The server can be accessed at the URL <code class="docutils literal notranslate"><span class="pre">http://localhost:9000</span></code> using
<a class="reference internal" href="../xmlrpc.client/index.html#module-xmlrpc.client" title="xmlrpc.client: Client library for XML-RPC"><code class="xref py py-mod docutils literal notranslate"><span class="pre">xmlrpc.client</span></code></a>.  This client code illustrates how to call the
<code class="docutils literal notranslate"><span class="pre">list_contents()</span></code> service from Python.</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">xmlrpc_function_client.py</span><a class="headerlink" href="#id2" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">xmlrpc.client</span>

<span class="n">proxy</span> <span class="o">=</span> <span class="n">xmlrpc</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">ServerProxy</span><span class="p">(</span><span class="s1">&#39;http://localhost:9000&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">proxy</span><span class="o">.</span><span class="n">list_contents</span><span class="p">(</span><span class="s1">&#39;/tmp&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">ServerProxy</span></code> is connected to the server using its base
URL, and then methods are called directly on the proxy. Each method
invoked on the proxy is translated into a request to the server. The
arguments are formatted using XML, and then sent to the server in a
POST message. The server unpacks the XML and determines which function
to call based on the method name invoked from the client. The
arguments are passed to the function, and the return value is
translated back to XML to be returned to the client.</p>
<p>Starting the server gives the following output.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ python3 xmlrpc_function.py

Use Control-C to exit
</pre></div>
</div>
<p>Running the client in a second window shows the contents of the
<code class="docutils literal notranslate"><span class="pre">/tmp</span></code> directory.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ python3 xmlrpc_function_client.py

[&#39;com.apple.launchd.aoGXonn8nV&#39;, &#39;com.apple.launchd.ilryIaQugf&#39;,
&#39;example.db.db&#39;,
&#39;KSOutOfProcessFetcher.501.ppfIhqX0vjaTSb8AJYobDV7Cu68=&#39;,
&#39;pymotw_import_example.shelve.db&#39;]
</pre></div>
</div>
<p>After the request is finished, log output appears in the server
window.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ python3 xmlrpc_function.py

Use Control-C to exit
INFO:root:list_contents(/tmp)
127.0.0.1 - - [18/Jun/2016 19:54:54] &quot;POST /RPC2 HTTP/1.1&quot; 200 -
</pre></div>
</div>
<p>The first line of output is from the <code class="docutils literal notranslate"><span class="pre">logging.info()</span></code> call inside
<code class="docutils literal notranslate"><span class="pre">list_contents()</span></code>. The second line is from the server logging the
request because <code class="docutils literal notranslate"><span class="pre">logRequests</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
</div>
<div class="section" id="alternate-api-names">
<h2>Alternate API Names<a class="headerlink" href="#alternate-api-names" title="Permalink to this headline">¶</a></h2>
<p>Sometimes the function names used inside a module or library are not
the names that should be used in the external API.  Names may change
because a platform-specific implementation is loaded, the service API
is built dynamically based on a configuration file, or real functions
can be replaced with stubs for testing.  To register a function with
an alternate name, pass the name as the second argument to
<code class="docutils literal notranslate"><span class="pre">register_function()</span></code>.</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">xmlrpc_alternate_name.py</span><a class="headerlink" href="#id3" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">xmlrpc.server</span> <span class="k">import</span> <span class="n">SimpleXMLRPCServer</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="n">server</span> <span class="o">=</span> <span class="n">SimpleXMLRPCServer</span><span class="p">((</span><span class="s1">&#39;localhost&#39;</span><span class="p">,</span> <span class="mi">9000</span><span class="p">))</span>


<span class="k">def</span> <span class="nf">list_contents</span><span class="p">(</span><span class="n">dir_name</span><span class="p">):</span>
    <span class="s2">&quot;Expose a function with an alternate name&quot;</span>
    <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">dir_name</span><span class="p">)</span>


<span class="n">server</span><span class="o">.</span><span class="n">register_function</span><span class="p">(</span><span class="n">list_contents</span><span class="p">,</span> <span class="s1">&#39;dir&#39;</span><span class="p">)</span>

<span class="k">try</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Use Control-C to exit&#39;</span><span class="p">)</span>
    <span class="n">server</span><span class="o">.</span><span class="n">serve_forever</span><span class="p">()</span>
<span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Exiting&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>The client should now use the name <code class="docutils literal notranslate"><span class="pre">dir()</span></code> instead of
<code class="docutils literal notranslate"><span class="pre">list_contents()</span></code>.</p>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text">xmlrpc_alternate_name_client.py</span><a class="headerlink" href="#id4" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">xmlrpc.client</span>

<span class="n">proxy</span> <span class="o">=</span> <span class="n">xmlrpc</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">ServerProxy</span><span class="p">(</span><span class="s1">&#39;http://localhost:9000&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;dir():&#39;</span><span class="p">,</span> <span class="n">proxy</span><span class="o">.</span><span class="n">dir</span><span class="p">(</span><span class="s1">&#39;/tmp&#39;</span><span class="p">))</span>
<span class="k">try</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">list_contents():&#39;</span><span class="p">,</span> <span class="n">proxy</span><span class="o">.</span><span class="n">list_contents</span><span class="p">(</span><span class="s1">&#39;/tmp&#39;</span><span class="p">))</span>
<span class="k">except</span> <span class="n">xmlrpc</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">Fault</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">ERROR:&#39;</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Calling <code class="docutils literal notranslate"><span class="pre">list_contents()</span></code> results in an error, since the server no
longer has a handler registered by that name.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ python3 xmlrpc_alternate_name_client.py

dir(): [&#39;com.apple.launchd.aoGXonn8nV&#39;,
&#39;com.apple.launchd.ilryIaQugf&#39;, &#39;example.db.db&#39;,
&#39;KSOutOfProcessFetcher.501.ppfIhqX0vjaTSb8AJYobDV7Cu68=&#39;,
&#39;pymotw_import_example.shelve.db&#39;]

ERROR: &lt;Fault 1: &#39;&lt;class \&#39;Exception\&#39;&gt;:method &quot;list_contents&quot;
is not supported&#39;&gt;
</pre></div>
</div>
</div>
<div class="section" id="dotted-api-names">
<h2>Dotted API Names<a class="headerlink" href="#dotted-api-names" title="Permalink to this headline">¶</a></h2>
<p>Individual functions can be registered with names that are not
normally legal for Python identifiers. For example, a period
(<code class="docutils literal notranslate"><span class="pre">.</span></code>) can be included in the names to separate the namespace in the service. The
next example extends the “directory” service to add “create” and
“remove” calls. All of the functions are registered using the prefix
“<code class="docutils literal notranslate"><span class="pre">dir.</span></code>” so that the same server can provide other services using a
different prefix. One other difference in this example is that some of
the functions return <code class="docutils literal notranslate"><span class="pre">None</span></code>, so the server has to be told to
translate the <code class="docutils literal notranslate"><span class="pre">None</span></code> values to a nil value.</p>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text">xmlrpc_dotted_name.py</span><a class="headerlink" href="#id5" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">xmlrpc.server</span> <span class="k">import</span> <span class="n">SimpleXMLRPCServer</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="n">server</span> <span class="o">=</span> <span class="n">SimpleXMLRPCServer</span><span class="p">((</span><span class="s1">&#39;localhost&#39;</span><span class="p">,</span> <span class="mi">9000</span><span class="p">),</span> <span class="n">allow_none</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">server</span><span class="o">.</span><span class="n">register_function</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">,</span> <span class="s1">&#39;dir.list&#39;</span><span class="p">)</span>
<span class="n">server</span><span class="o">.</span><span class="n">register_function</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">,</span> <span class="s1">&#39;dir.create&#39;</span><span class="p">)</span>
<span class="n">server</span><span class="o">.</span><span class="n">register_function</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">rmdir</span><span class="p">,</span> <span class="s1">&#39;dir.remove&#39;</span><span class="p">)</span>

<span class="k">try</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Use Control-C to exit&#39;</span><span class="p">)</span>
    <span class="n">server</span><span class="o">.</span><span class="n">serve_forever</span><span class="p">()</span>
<span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Exiting&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>To call the service functions in the client, simply refer to them with the
dotted name.</p>
<div class="literal-block-wrapper docutils container" id="id6">
<div class="code-block-caption"><span class="caption-text">xmlrpc_dotted_name_client.py</span><a class="headerlink" href="#id6" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">xmlrpc.client</span>

<span class="n">proxy</span> <span class="o">=</span> <span class="n">xmlrpc</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">ServerProxy</span><span class="p">(</span><span class="s1">&#39;http://localhost:9000&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;BEFORE       :&#39;</span><span class="p">,</span> <span class="s1">&#39;EXAMPLE&#39;</span> <span class="ow">in</span> <span class="n">proxy</span><span class="o">.</span><span class="n">dir</span><span class="o">.</span><span class="n">list</span><span class="p">(</span><span class="s1">&#39;/tmp&#39;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;CREATE       :&#39;</span><span class="p">,</span> <span class="n">proxy</span><span class="o">.</span><span class="n">dir</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="s1">&#39;/tmp/EXAMPLE&#39;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;SHOULD EXIST :&#39;</span><span class="p">,</span> <span class="s1">&#39;EXAMPLE&#39;</span> <span class="ow">in</span> <span class="n">proxy</span><span class="o">.</span><span class="n">dir</span><span class="o">.</span><span class="n">list</span><span class="p">(</span><span class="s1">&#39;/tmp&#39;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;REMOVE       :&#39;</span><span class="p">,</span> <span class="n">proxy</span><span class="o">.</span><span class="n">dir</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;/tmp/EXAMPLE&#39;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;AFTER        :&#39;</span><span class="p">,</span> <span class="s1">&#39;EXAMPLE&#39;</span> <span class="ow">in</span> <span class="n">proxy</span><span class="o">.</span><span class="n">dir</span><span class="o">.</span><span class="n">list</span><span class="p">(</span><span class="s1">&#39;/tmp&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<p>Assuming there is no <code class="docutils literal notranslate"><span class="pre">/tmp/EXAMPLE</span></code> file on the current system,
the output for the sample client script is as follows.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ python3 xmlrpc_dotted_name_client.py

BEFORE       : False
CREATE       : None
SHOULD EXIST : True
REMOVE       : None
AFTER        : False
</pre></div>
</div>
</div>
<div class="section" id="arbitrary-api-names">
<h2>Arbitrary API Names<a class="headerlink" href="#arbitrary-api-names" title="Permalink to this headline">¶</a></h2>
<p>Another interesting feature is the ability to register functions with
names that are otherwise invalid Python object attribute names. This
example service registers a function with the name “<code class="docutils literal notranslate"><span class="pre">multiply</span>
<span class="pre">args</span></code>”.</p>
<div class="literal-block-wrapper docutils container" id="id7">
<div class="code-block-caption"><span class="caption-text">xmlrpc_arbitrary_name.py</span><a class="headerlink" href="#id7" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">xmlrpc.server</span> <span class="k">import</span> <span class="n">SimpleXMLRPCServer</span>

<span class="n">server</span> <span class="o">=</span> <span class="n">SimpleXMLRPCServer</span><span class="p">((</span><span class="s1">&#39;localhost&#39;</span><span class="p">,</span> <span class="mi">9000</span><span class="p">))</span>


<span class="k">def</span> <span class="nf">my_function</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span>


<span class="n">server</span><span class="o">.</span><span class="n">register_function</span><span class="p">(</span><span class="n">my_function</span><span class="p">,</span> <span class="s1">&#39;multiply args&#39;</span><span class="p">)</span>

<span class="k">try</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Use Control-C to exit&#39;</span><span class="p">)</span>
    <span class="n">server</span><span class="o">.</span><span class="n">serve_forever</span><span class="p">()</span>
<span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Exiting&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Since the registered name contains a space, dot notation cannot be
used to access it directly from the proxy.  Using <code class="docutils literal notranslate"><span class="pre">getattr()</span></code> does
work, however.</p>
<div class="literal-block-wrapper docutils container" id="id8">
<div class="code-block-caption"><span class="caption-text">xmlrpc_arbitrary_name_client.py</span><a class="headerlink" href="#id8" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">xmlrpc.client</span>

<span class="n">proxy</span> <span class="o">=</span> <span class="n">xmlrpc</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">ServerProxy</span><span class="p">(</span><span class="s1">&#39;http://localhost:9000&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">proxy</span><span class="p">,</span> <span class="s1">&#39;multiply args&#39;</span><span class="p">)(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
</pre></div>
</div>
</div>
<p>Avoid creating services with names like this, though.  This example is
provided not necessarily because it is a good idea, but because
existing services with arbitrary names exist, and new programs may
need to be able to call them.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ python3 xmlrpc_arbitrary_name_client.py

25
</pre></div>
</div>
</div>
<div class="section" id="exposing-methods-of-objects">
<h2>Exposing Methods of Objects<a class="headerlink" href="#exposing-methods-of-objects" title="Permalink to this headline">¶</a></h2>
<p>The earlier sections talked about techniques for establishing APIs
using good naming conventions and namespacing. Another way to
incorporate namespacing into an API is to use instances of classes and
expose their methods. The first example can be recreated using an
instance with a single method.</p>
<div class="literal-block-wrapper docutils container" id="id9">
<div class="code-block-caption"><span class="caption-text">xmlrpc_instance.py</span><a class="headerlink" href="#id9" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">xmlrpc.server</span> <span class="k">import</span> <span class="n">SimpleXMLRPCServer</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">inspect</span>

<span class="n">server</span> <span class="o">=</span> <span class="n">SimpleXMLRPCServer</span><span class="p">(</span>
    <span class="p">(</span><span class="s1">&#39;localhost&#39;</span><span class="p">,</span> <span class="mi">9000</span><span class="p">),</span>
    <span class="n">logRequests</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>


<span class="k">class</span> <span class="nc">DirectoryService</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dir_name</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">dir_name</span><span class="p">)</span>


<span class="n">server</span><span class="o">.</span><span class="n">register_instance</span><span class="p">(</span><span class="n">DirectoryService</span><span class="p">())</span>

<span class="k">try</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Use Control-C to exit&#39;</span><span class="p">)</span>
    <span class="n">server</span><span class="o">.</span><span class="n">serve_forever</span><span class="p">()</span>
<span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Exiting&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>A client can call the method directly.</p>
<div class="literal-block-wrapper docutils container" id="id10">
<div class="code-block-caption"><span class="caption-text">xmlrpc_instance_client.py</span><a class="headerlink" href="#id10" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">xmlrpc.client</span>

<span class="n">proxy</span> <span class="o">=</span> <span class="n">xmlrpc</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">ServerProxy</span><span class="p">(</span><span class="s1">&#39;http://localhost:9000&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">proxy</span><span class="o">.</span><span class="n">list</span><span class="p">(</span><span class="s1">&#39;/tmp&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<p>The output shows the contents of the directory.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ python3 xmlrpc_instance_client.py

[&#39;com.apple.launchd.aoGXonn8nV&#39;, &#39;com.apple.launchd.ilryIaQugf&#39;,
&#39;example.db.db&#39;,
&#39;KSOutOfProcessFetcher.501.ppfIhqX0vjaTSb8AJYobDV7Cu68=&#39;,
&#39;pymotw_import_example.shelve.db&#39;]
</pre></div>
</div>
<p>The “<code class="docutils literal notranslate"><span class="pre">dir.</span></code>” prefix for the service has been lost, though.  It can
be restored by defining a class to set up a service tree that can be
invoked from clients.</p>
<div class="literal-block-wrapper docutils container" id="id11">
<div class="code-block-caption"><span class="caption-text">xmlrpc_instance_dotted_names.py</span><a class="headerlink" href="#id11" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">xmlrpc.server</span> <span class="k">import</span> <span class="n">SimpleXMLRPCServer</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">inspect</span>

<span class="n">server</span> <span class="o">=</span> <span class="n">SimpleXMLRPCServer</span><span class="p">(</span>
    <span class="p">(</span><span class="s1">&#39;localhost&#39;</span><span class="p">,</span> <span class="mi">9000</span><span class="p">),</span>
    <span class="n">logRequests</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>


<span class="k">class</span> <span class="nc">ServiceRoot</span><span class="p">:</span>
    <span class="k">pass</span>


<span class="k">class</span> <span class="nc">DirectoryService</span><span class="p">:</span>

    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dir_name</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">dir_name</span><span class="p">)</span>


<span class="n">root</span> <span class="o">=</span> <span class="n">ServiceRoot</span><span class="p">()</span>
<span class="n">root</span><span class="o">.</span><span class="n">dir</span> <span class="o">=</span> <span class="n">DirectoryService</span><span class="p">()</span>

<span class="n">server</span><span class="o">.</span><span class="n">register_instance</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">allow_dotted_names</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="k">try</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Use Control-C to exit&#39;</span><span class="p">)</span>
    <span class="n">server</span><span class="o">.</span><span class="n">serve_forever</span><span class="p">()</span>
<span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Exiting&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>By registering the instance of <code class="docutils literal notranslate"><span class="pre">ServiceRoot</span></code> with
<code class="docutils literal notranslate"><span class="pre">allow_dotted_names</span></code> enabled, the server has permission to walk the
tree of objects when a request comes in to find the named method using
<code class="docutils literal notranslate"><span class="pre">getattr()</span></code>.</p>
<div class="literal-block-wrapper docutils container" id="id12">
<div class="code-block-caption"><span class="caption-text">xmlrpc_instance_dotted_names_client.py</span><a class="headerlink" href="#id12" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">xmlrpc.client</span>

<span class="n">proxy</span> <span class="o">=</span> <span class="n">xmlrpc</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">ServerProxy</span><span class="p">(</span><span class="s1">&#39;http://localhost:9000&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">proxy</span><span class="o">.</span><span class="n">dir</span><span class="o">.</span><span class="n">list</span><span class="p">(</span><span class="s1">&#39;/tmp&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<p>The output of <code class="docutils literal notranslate"><span class="pre">dir.list()</span></code> is the same as with the previous
implementations.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ python3 xmlrpc_instance_dotted_names_client.py

[&#39;com.apple.launchd.aoGXonn8nV&#39;, &#39;com.apple.launchd.ilryIaQugf&#39;,
&#39;example.db.db&#39;,
&#39;KSOutOfProcessFetcher.501.ppfIhqX0vjaTSb8AJYobDV7Cu68=&#39;,
&#39;pymotw_import_example.shelve.db&#39;]
</pre></div>
</div>
</div>
<div class="section" id="dispatching-calls">
<h2>Dispatching Calls<a class="headerlink" href="#dispatching-calls" title="Permalink to this headline">¶</a></h2>
<p>By default, <code class="docutils literal notranslate"><span class="pre">register_instance()</span></code> finds all callable attributes
of the instance with names not starting with an underscore (“<code class="docutils literal notranslate"><span class="pre">_</span></code>”) and registers
them with their name. To be more careful about the exposed methods,
custom dispatching logic can be used.</p>
<div class="literal-block-wrapper docutils container" id="id13">
<div class="code-block-caption"><span class="caption-text">xmlrpc_instance_with_prefix.py</span><a class="headerlink" href="#id13" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">xmlrpc.server</span> <span class="k">import</span> <span class="n">SimpleXMLRPCServer</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">inspect</span>

<span class="n">server</span> <span class="o">=</span> <span class="n">SimpleXMLRPCServer</span><span class="p">(</span>
    <span class="p">(</span><span class="s1">&#39;localhost&#39;</span><span class="p">,</span> <span class="mi">9000</span><span class="p">),</span>
    <span class="n">logRequests</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>


<span class="k">def</span> <span class="nf">expose</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
    <span class="s2">&quot;Decorator to set exposed flag on a function.&quot;</span>
    <span class="n">f</span><span class="o">.</span><span class="n">exposed</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">return</span> <span class="n">f</span>


<span class="k">def</span> <span class="nf">is_exposed</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
    <span class="s2">&quot;Test whether another function should be publicly exposed.&quot;</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s1">&#39;exposed&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">MyService</span><span class="p">:</span>
    <span class="n">PREFIX</span> <span class="o">=</span> <span class="s1">&#39;prefix&#39;</span>

    <span class="k">def</span> <span class="nf">_dispatch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">params</span><span class="p">):</span>
        <span class="c1"># Remove our prefix from the method name</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">method</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">PREFIX</span> <span class="o">+</span> <span class="s1">&#39;.&#39;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="s1">&#39;method &quot;</span><span class="si">{}</span><span class="s1">&quot; is not supported&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">method</span><span class="p">)</span>
            <span class="p">)</span>

        <span class="n">method_name</span> <span class="o">=</span> <span class="n">method</span><span class="o">.</span><span class="n">partition</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">func</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">method_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_exposed</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="s1">&#39;method &quot;</span><span class="si">{}</span><span class="s1">&quot; is not supported&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">method</span><span class="p">)</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">params</span><span class="p">)</span>

    <span class="nd">@expose</span>
    <span class="k">def</span> <span class="nf">public</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;This is public&#39;</span>

    <span class="k">def</span> <span class="nf">private</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;This is private&#39;</span>


<span class="n">server</span><span class="o">.</span><span class="n">register_instance</span><span class="p">(</span><span class="n">MyService</span><span class="p">())</span>

<span class="k">try</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Use Control-C to exit&#39;</span><span class="p">)</span>
    <span class="n">server</span><span class="o">.</span><span class="n">serve_forever</span><span class="p">()</span>
<span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Exiting&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">public()</span></code> method of <code class="docutils literal notranslate"><span class="pre">MyService</span></code> is marked as exposed to the
XML-RPC service while <code class="docutils literal notranslate"><span class="pre">private()</span></code> is not. The <code class="docutils literal notranslate"><span class="pre">_dispatch()</span></code> method
is invoked when the client tries to access a function that is part of
<code class="docutils literal notranslate"><span class="pre">MyService</span></code>. It first enforces the use of a prefix (“<code class="docutils literal notranslate"><span class="pre">prefix.</span></code>” in
this case, but any string can be used).  Then it requires the function
to have an attribute called <code class="docutils literal notranslate"><span class="pre">exposed</span></code> with a true value. The exposed
flag is set on a function using a decorator for convenience. The
following example includes a few sample client calls.</p>
<div class="literal-block-wrapper docutils container" id="id14">
<div class="code-block-caption"><span class="caption-text">xmlrpc_instance_with_prefix_client.py</span><a class="headerlink" href="#id14" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">xmlrpc.client</span>

<span class="n">proxy</span> <span class="o">=</span> <span class="n">xmlrpc</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">ServerProxy</span><span class="p">(</span><span class="s1">&#39;http://localhost:9000&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;public():&#39;</span><span class="p">,</span> <span class="n">proxy</span><span class="o">.</span><span class="n">prefix</span><span class="o">.</span><span class="n">public</span><span class="p">())</span>
<span class="k">try</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;private():&#39;</span><span class="p">,</span> <span class="n">proxy</span><span class="o">.</span><span class="n">prefix</span><span class="o">.</span><span class="n">private</span><span class="p">())</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">ERROR:&#39;</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
<span class="k">try</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;public() without prefix:&#39;</span><span class="p">,</span> <span class="n">proxy</span><span class="o">.</span><span class="n">public</span><span class="p">())</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">ERROR:&#39;</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>The resulting output, with the expected error messages trapped and
reported, follows.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ python3 xmlrpc_instance_with_prefix_client.py

public(): This is public

ERROR: &lt;Fault 1: &#39;&lt;class \&#39;Exception\&#39;&gt;:method &quot;prefix.private&quot; is
not supported&#39;&gt;

ERROR: &lt;Fault 1: &#39;&lt;class \&#39;Exception\&#39;&gt;:method &quot;public&quot; is not
supported&#39;&gt;
</pre></div>
</div>
<p>There are several other ways to override the dispatching mechanism,
including subclassing directly from <code class="docutils literal notranslate"><span class="pre">SimpleXMLRPCServer</span></code>. Refer
to the docstrings in the module for more details.</p>
</div>
<div class="section" id="introspection-api">
<h2>Introspection API<a class="headerlink" href="#introspection-api" title="Permalink to this headline">¶</a></h2>
<p>As with many network services, it is possible to query an XML-RPC
server to ask it what methods it supports and learn how to use
them. <code class="docutils literal notranslate"><span class="pre">SimpleXMLRPCServer</span></code> includes a set of public methods for
performing this introspection. By default they are turned off, but can
be enabled with <code class="docutils literal notranslate"><span class="pre">register_introspection_functions()</span></code>.  Support
for <code class="docutils literal notranslate"><span class="pre">system.listMethods()</span></code> and <code class="docutils literal notranslate"><span class="pre">system.methodHelp()</span></code> can
be added to a service by defining <code class="docutils literal notranslate"><span class="pre">_listMethods()</span></code> and
<code class="docutils literal notranslate"><span class="pre">_methodHelp()</span></code> on the service class.</p>
<div class="literal-block-wrapper docutils container" id="id15">
<div class="code-block-caption"><span class="caption-text">xmlrpc_introspection.py</span><a class="headerlink" href="#id15" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">xmlrpc.server</span> <span class="k">import</span> <span class="p">(</span><span class="n">SimpleXMLRPCServer</span><span class="p">,</span>
                           <span class="n">list_public_methods</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">inspect</span>

<span class="n">server</span> <span class="o">=</span> <span class="n">SimpleXMLRPCServer</span><span class="p">(</span>
    <span class="p">(</span><span class="s1">&#39;localhost&#39;</span><span class="p">,</span> <span class="mi">9000</span><span class="p">),</span>
    <span class="n">logRequests</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">server</span><span class="o">.</span><span class="n">register_introspection_functions</span><span class="p">()</span>


<span class="k">class</span> <span class="nc">DirectoryService</span><span class="p">:</span>

    <span class="k">def</span> <span class="nf">_listMethods</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">list_public_methods</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_methodHelp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">method</span><span class="p">):</span>
        <span class="n">f</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">method</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getdoc</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dir_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;list(dir_name) =&gt; [&lt;filenames&gt;]</span>

<span class="sd">        Returns a list containing the contents of</span>
<span class="sd">        the named directory.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">dir_name</span><span class="p">)</span>


<span class="n">server</span><span class="o">.</span><span class="n">register_instance</span><span class="p">(</span><span class="n">DirectoryService</span><span class="p">())</span>

<span class="k">try</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Use Control-C to exit&#39;</span><span class="p">)</span>
    <span class="n">server</span><span class="o">.</span><span class="n">serve_forever</span><span class="p">()</span>
<span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Exiting&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>In this case, the convenience function <code class="docutils literal notranslate"><span class="pre">list_public_methods()</span></code>
scans an instance to return the names of callable attributes that do
not start with underscore (<code class="docutils literal notranslate"><span class="pre">_</span></code>). Redefine <code class="docutils literal notranslate"><span class="pre">_listMethods()</span></code> to
apply whatever rules are desired.  Similarly, for this basic example
<code class="docutils literal notranslate"><span class="pre">_methodHelp()</span></code> returns the docstring of the function, but could
be written to build a help string from another source.</p>
<p>This client queries the server and reports on all of the publicly
callable methods.</p>
<div class="literal-block-wrapper docutils container" id="id16">
<div class="code-block-caption"><span class="caption-text">xmlrpc_introspection_client.py</span><a class="headerlink" href="#id16" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">xmlrpc.client</span>

<span class="n">proxy</span> <span class="o">=</span> <span class="n">xmlrpc</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">ServerProxy</span><span class="p">(</span><span class="s1">&#39;http://localhost:9000&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">method_name</span> <span class="ow">in</span> <span class="n">proxy</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">listMethods</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;=&#39;</span> <span class="o">*</span> <span class="mi">60</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">method_name</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;-&#39;</span> <span class="o">*</span> <span class="mi">60</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">proxy</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">methodHelp</span><span class="p">(</span><span class="n">method_name</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>The system methods are included in the results.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ python3 xmlrpc_introspection_client.py

============================================================
list
------------------------------------------------------------
list(dir_name) =&gt; [&lt;filenames&gt;]

Returns a list containing the contents of
the named directory.

============================================================
system.listMethods
------------------------------------------------------------
system.listMethods() =&gt; [&#39;add&#39;, &#39;subtract&#39;, &#39;multiple&#39;]

Returns a list of the methods supported by the server.

============================================================
system.methodHelp
------------------------------------------------------------
system.methodHelp(&#39;add&#39;) =&gt; &quot;Adds two integers together&quot;

Returns a string containing documentation for the specified method.

============================================================
system.methodSignature
------------------------------------------------------------
system.methodSignature(&#39;add&#39;) =&gt; [double, int, int]

Returns a list describing the signature of the method. In the
above example, the add method takes two integers as arguments
and returns a double result.

This server does NOT support system.methodSignature.
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<ul class="last simple">
<li><a class="reference external" href="https://docs.python.org/3.7/library/xmlrpc.server.html">Standard library documentation for xmlrpc.server</a></li>
<li><a class="reference internal" href="../xmlrpc.client/index.html#module-xmlrpc.client" title="xmlrpc.client: Client library for XML-RPC"><code class="xref py py-mod docutils literal notranslate"><span class="pre">xmlrpc.client</span></code></a> – XML-RPC client.</li>
<li><a class="reference external" href="http://www.tldp.org/HOWTO/XML-RPC-HOWTO/index.html">XML-RPC How To</a> –
Describes how to use XML-RPC to implement clients and servers in
a variety of languages.</li>
</ul>
</div>
</div>
</div>



        <div id="footer-nav">
<a id="prev-link" href="../xmlrpc.client/index.html"
   title="previous chapter"><i class="fa fa-arrow-circle-left"></i> xmlrpc.client — Client Library for XML-RPC</a>
<a id="next-link" href="../email.html"
   title="next chapter">Email <i class="fa fa-arrow-circle-right"></i></a>
        </div>

        </div>
      </div>

      <div class="pure-u-1-4">
        <div class="sidebar-wrapper">
          <div class="sidebar">
<div id="sidebar-toc">
  <h5>Quick Links</h5>
  <ul>
    
    <li><a href="#a-simple-server"><i class="fa fa-caret-right"></i>A Simple Server</a></li>
    
    <li><a href="#alternate-api-names"><i class="fa fa-caret-right"></i>Alternate API Names</a></li>
    
    <li><a href="#dotted-api-names"><i class="fa fa-caret-right"></i>Dotted API Names</a></li>
    
    <li><a href="#arbitrary-api-names"><i class="fa fa-caret-right"></i>Arbitrary API Names</a></li>
    
    <li><a href="#exposing-methods-of-objects"><i class="fa fa-caret-right"></i>Exposing Methods of Objects</a></li>
    
    <li><a href="#dispatching-calls"><i class="fa fa-caret-right"></i>Dispatching Calls</a></li>
    
    <li><a href="#introspection-api"><i class="fa fa-caret-right"></i>Introspection API</a></li>
    
  </ul>
</div>

          </div>
          <div class="sidebar"><div id="sidebar-last-updated">
  This page was last updated 2016-12-29.
</div>

          </div>
          <div class="sidebar">
<div id="sidebar-nav">
  <h5>Navigation</h5>
  <ul>
    <li><a href="../xmlrpc.client/index.html"
           title="previous chapter"><i class="fa fa-arrow-circle-left"></i>xmlrpc.client — Client Library for XML-RPC</a></li>
    <li><a href="../email.html"
           title="next chapter"><i class="fa fa-arrow-circle-right"></i>Email</a></li>
  </ul>
</div>
          </div>
          <div class="sidebar"><div id="sidebar-book"><a target="new" href="https://doughellmann.com/blog/the-python-3-standard-library-by-example/"><img src="../_static/book-cover-image-med.jpg"><br>Get the book</a></div>
          </div>
          <div class="sidebar"><div id="sidebar-example-disclaimer">
<p>The output from all the example programs
from PyMOTW-3 has been generated with Python 3.7.9, unless
otherwise noted. Some of the features described here may not be
available in earlier versions of Python.</p>
<p>Looking for <a href="/2/">examples for Python 2</a>?</p>
</div>
          </div>

        </div>
      </div>

    </div>

    <div class="pure-g-r" id="footer">

      <div class="pure-u-1-3">
        <div class="footer-list">
            <h4>This Site</h4>
            <ul>
              <li><a href="../py-modindex.html"><i class="fa fa-list fa-lg"></i> Module Index</a></li>
              <li><a href="../genindex.html"><i class="fa fa-italic fa-lg"></i> Index</a></li>
            </ul>
        </div>
      </div><div class="pure-u-1-3">
          <div class="footer-content">
            <div class="socialmedia">
              <a class="sociallink" href="../index.html"
       title="Home">
      <i class="fa fa-home fa-lg"></i></a>
              <a class="sociallink" href="../about.html"
       title="About">
      <i class="fa fa-user fa-lg"></i></a>
              <a class="sociallink" href="http://www.twitter.com/pymotw"
       title="Twitter">
      <i class="fa fa-twitter fa-lg"></i></a>
              <a class="sociallink" href="http://feeds.doughellmann.com/PyMOTW"
       title="Subscribe via RSS">
      <i class="fa fa-rss-square fa-lg"></i></a>
              <a class="sociallink" href="http://feedburner.google.com/fb/a/mailverify?uri=PyMOTW&amp;loc=en_US"
       title="Subscribe via Email">
      <i class="fa fa-envelope fa-lg"></i></a>
            </div>

            <div class="copyright">
              <a rel="author" href="../about.html">&copy; Copyright 2021, Doug Hellmann</a>
            </div>

            <div class="cc"><a href="http://creativecommons.org/licenses/by-nc-sa/4.0/deed.en_US" rel="license"><img alt="Creative Commons License BY-NC-SA" style="border-width:0; align: center;" width="88" height="31" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAAAfCAMAAABUFvrSAAAABGdBTUEAALGOfPtRkwAAAf5QTFRF////////////AAAADQwNDQ4NDg4OEBAQGRkZGxsbHxscICAgIx8gJCQkKCUmKCgoKCkoKSkpKSopKicnKioqLS0tMDAwMS0uMjExMjMxNTY1Pj8+Pzc5Pzs8QEBAQ0RDUFBQUFFQWldYXV5dYGBgY19haGVmbmxscHBwcHJvdXJzdnN0eHV2eXx5en15fH98fX98fnt8f4F+gICAgoWChIGChIWEhIaEh4aHiYyJjIqLjoeLj4+PkY+PkZORkZSRk5iTlZmUlpmWmJaXmpiZnp2dnqCdn5aan5+fn6Oeoqaho6Gho6ijpqqmq7GqrKurrLKrrbOsrrOtrrStr6+vr7Kvr7Sur7WusLOvsLWvsLavsbewsrexsrixs7iytLmztLqztbW1tbq0tru1t7y2uL23ub64ub65urm5ur+5ur+6u8C6u8C7vMC8vMG7vMG8vcK8vcK9vsK9vsO+v7+/v8O+v8S+wMS/wMW/wMXAwcXAwsfCw8fCw8jDxMfDxMjDxMnExcnExcnFxsrFxsrGx8vHyMfHyMzHyMzIycjIyc3Iyc3Jys3Jy8rLy87Ky8/Ky8/LzM/LzNDLzNDMzdDMzdHMzdHNztHNztLOz8/Pz9PP0NPP0NTQ0dTQ0dTR0tXR0tXS09bS1tXV39/f4N/g4+Pj6Ofn7+/v8fHx////rrSdFQAAAAN0Uk5TAAoO5yEBUwAAA+FJREFUSMe1lo9301QUx6uXUmaf0qJ26iTrRoVinUzjQNR1gAyH6Lqx6XTDoVvXbU7qhA5m7CgYWaTDlLa6AiFsba3t+y+9Sdr8OvVMi7zTnLTf5H7ee9/73n11PA1PpDkcADPRWPwKt8YLG2I2n89m7gh8iluJz0dnpqe+HBsdHRn+7w3JyF1cvpbk05mCJG8Xi9uPpMLdNJ9cXV5UyBNjoyMtkR2A3B9Tt8SCfLTTqUzC2XlMvpcRbnA/IPmryYnzoyM9XuWBt8eI21FBcAy5Qk4KtxkGtQ1I+fRNbnk+evHC5NhJDwATDDIAnhNa1ImdFQTHr6WEvNyFPFeATSTYgAu/dl3/I31jNR6bnZ76eDf4yxRb2Q+71aiz/0JB8JXkrZzCdbFVqrUhRHuu54XkytLczAUvBFADUB6ARwnyqEp/t02prK9XdAXBHC9KyPWVqd6qPhyzlOG55dhsL/hLDTD1A3rYAy+dRu6eXaGKruA75wi2hbqigNd+LYSRW6XUSh64l05dXYruA1OPZfAOD3vhObL/ILDvQkRXynSdvPpaiJB+TVHAfEZuA9d9amlVF7TJd3nu+xgwyu8AqNOnDGAM8/obOLhQpWQotPYReZ/SQdKuKQpY2DwKwFJbGwI4VhCSlxchSFUnNC+CCgaV9RAKoZKh1J4le9FmQv5SFQW88aATXGhEws8wrHb7AANc0CndQS+ag5ERaieke0FXvnkxoYL/1MGi7FSmmVBXMDOu3gLK5J2PMjdXv2tmBX6pDdKSkq39DWXh3G1KI4QYVmS3AHCIPnCXE+4hHy6PcfeQ6sV2lufiL2jJ0wasp4p2k/Z2CEXeeqahDBLS1/c8+dBIXq4IkFAiWQ1QtxtnUMz/wsXfBj+1LzdUKn17dvXXzEqfMoFDNWO57QCe22dskKB5g7zXbVN+i0RKumKxonrfzaIVys2wYu7TVrd0PXn1rOnJC4JTFjF5c19/gnXLFwj6jJJz1rOjoi63LnBRfbmNM+qNunG5baSufhu9OPX5my2VTWEzrHrRbIP8dHl+dnpyrIVDBME/q1u6/E9bGmt9i2AsQmeaFaFwIb22soSlfuL8SEtgOCJKB5BsKkNltWyK7zzWMY3X4exDc6GvsljoX5FzR+BxwdCbf3jAdjTJv5/S39H2B2iXpmgXpWB7iVrB0JuVzpgP07CUO2WKqX+oiVL/benKImhgOIzHf7hx/A/IBdHsQ6Nsmruilo4afVFqB8PLn2U2H8hbxeKWjH9YvuiwxNiMaNhALZptCg5d7zh+Sczmclnx0vEOax6ajdjucSMPTcD/97/Cp54Q929ZZbgcR3o0hAAAAABJRU5ErkJggg=="/></a>
            </div>

          </div></div><div class="pure-u-1-3">
          <div class="footer-list">
            <h4>Other Writing</h4>
            <ul>
              <li><a href="https://doughellmann.com/"><i class="fa fa-pencil fa-lg"></i> Blog</a></li>
              <li><a href="https://doughellmann.com/blog/the-python-standard-library-by-example/"><i class="fa fa-book fa-lg"></i> The Python Standard Library By Example</a></li>
            </ul>
          </div>
        </div><script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-38546875-3', 'pymotw.com');
  ga('send', 'pageview');
</script>

  </body>
</html>
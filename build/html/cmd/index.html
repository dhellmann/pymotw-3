<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>cmd — Line-oriented Command Processors &mdash; PyMOTW 3</title>

    <link rel="stylesheet" href="../_static/pure-min.css" type="text/css">
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/font-awesome/css/font-awesome.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pymotw.css" type="text/css">

    <link rel="shortcut icon" type="image/png" href="../_static/favicon.png">

    <link rel="alternate" type="application/atom+xml"
          title="Doug Hellmann"
          href="http://feeds.doughellmann.com/DougHellmann" />
    <link rel="alternate" type="application/atom+xml"
          title="PyMOTW Updates"
          href="http://feeds.doughellmann.com/PyMOTW" />

    <meta name="verify-v1" content="5saTcOa2HLac4V85yUg3SARfun1PqT5Upu7IR/6fpv4="/>

    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@pymotw" />
    <meta name="twitter:title" content="cmd — Line-oriented Command Processors" />
    <meta name="twitter:image" content="https://pymotw.com/3/_static/logo-large.png" />

  </head>
  <body>

    <div class="pure-menu pure-menu-open pure-menu-horizontal" id="site-menu">
      <a class="pure-menu-heading" href="../index.html"><img src="../_static/logo.png"> PyMOTW-3</a>

      <ul id="top-menu">
        <li class="pure-menu-selected"><a href="../py-modindex.html"><i class="fa fa-list fa-lg"></i> Module Index</a></li>
        <li class="pure-menu-selected"><a href="../genindex.html"><i class="fa fa-italic fa-lg"></i> Index</a></li>
        <li class="pure-menu-selected"><a class="sociallink" href="http://www.twitter.com/pymotw"
       title="Twitter">
      <i class="fa fa-twitter fa-lg"></i></a></a>
        <li class="pure-menu-selected"><a class="sociallink" href="http://feeds.doughellmann.com/PyMOTW"
       title="Subscribe via RSS">
      <i class="fa fa-rss-square fa-lg"></i></a></li>
      </ul>

    </div>

    <div class="pure-menu pure-menu-open pure-menu-vertical" id="breadcrumbs-menu">
      
      <ul id="breadcrumbs">
        <li class="pure-menu-selected"><a href="../frameworks.html"><i class="fa fa-arrow-circle-up"></i> Application Building Blocks</a></li>
      </ul>
    </div>

    <div class="pure-g-r" id="content-container">

      <div class="pure-u-3-4">
        <div class="content">
          
  <div class="section" id="module-cmd">
<span id="cmd-line-oriented-command-processors"></span><h1>cmd — Line-oriented Command Processors<a class="headerlink" href="#module-cmd" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Purpose:</th><td class="field-body">Create line-oriented command processors.</td>
</tr>
</tbody>
</table>
<p>The <code class="docutils literal notranslate"><span class="pre">cmd</span></code> module contains one public class, <code class="docutils literal notranslate"><span class="pre">Cmd</span></code>,
designed to be used as a base class for interactive shells and other
command interpreters. By default it uses <a class="reference internal" href="../readline/index.html#module-readline" title="readline: The GNU readline library"><code class="xref py py-mod docutils literal notranslate"><span class="pre">readline</span></code></a> for
interactive prompt handling, command line editing, and command
completion.</p>
<div class="section" id="processing-commands">
<h2>Processing Commands<a class="headerlink" href="#processing-commands" title="Permalink to this headline">¶</a></h2>
<p>A command interpreter created with <code class="docutils literal notranslate"><span class="pre">cmd</span></code> uses a loop to read all
lines from its input, parse them, and then dispatch the command to an
appropriate <em>command handler</em>. Input lines are parsed into two parts:
the command, and any other text on the line. If the user enters <code class="docutils literal notranslate"><span class="pre">foo</span>
<span class="pre">bar</span></code>, and the interpreter class includes a method named
<code class="docutils literal notranslate"><span class="pre">do_foo()</span></code>, it is called with <code class="docutils literal notranslate"><span class="pre">&quot;bar&quot;</span></code> as the only argument.</p>
<p>The end-of-file marker is dispatched to <code class="docutils literal notranslate"><span class="pre">do_EOF()</span></code>. If a command
handler returns a true value, the program will exit cleanly. So to
give a clean way to exit the interpreter, make sure to implement
<code class="docutils literal notranslate"><span class="pre">do_EOF()</span></code> and have it return True.</p>
<p>This simple example program supports the “greet” command:</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">cmd_simple.py</span><a class="headerlink" href="#id1" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">cmd</span>


<span class="k">class</span> <span class="nc">HelloWorld</span><span class="p">(</span><span class="n">cmd</span><span class="o">.</span><span class="n">Cmd</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">do_greet</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;hello&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">do_EOF</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">HelloWorld</span><span class="p">()</span><span class="o">.</span><span class="n">cmdloop</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>Running it interactively demonstrates how commands are dispatched and
shows of some of the features included in <code class="docutils literal notranslate"><span class="pre">Cmd</span></code>.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ python3 cmd_simple.py

(Cmd)
</pre></div>
</div>
<p>The first thing to notice is the command prompt, <code class="docutils literal notranslate"><span class="pre">(Cmd)</span></code>. The prompt
can be configured through the attribute <code class="docutils literal notranslate"><span class="pre">prompt</span></code>. The prompt value is
dynamic, and if a command handler changes the prompt attribute the new
value is used to query for the next command.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Documented commands (type help &lt;topic&gt;):
========================================
help

Undocumented commands:
======================
EOF  greet
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">help</span></code> command is built into <code class="docutils literal notranslate"><span class="pre">Cmd</span></code>. With no
arguments, <code class="docutils literal notranslate"><span class="pre">help</span></code> shows the list of commands available. If
the input includes a command name, the output is more verbose and
restricted to details of that command, when available.</p>
<p>If the command is <code class="docutils literal notranslate"><span class="pre">greet</span></code>, <code class="docutils literal notranslate"><span class="pre">do_greet()</span></code> is invoked to
handle it:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>(Cmd) greet
hello
</pre></div>
</div>
<p>If the class does not include a specific handler for a command, the
method <code class="docutils literal notranslate"><span class="pre">default()</span></code> is called with the entire input line as an
argument. The built-in implementation of <code class="docutils literal notranslate"><span class="pre">default()</span></code> reports an
error.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>(Cmd) foo
*** Unknown syntax: foo
</pre></div>
</div>
<p>Since <code class="docutils literal notranslate"><span class="pre">do_EOF()</span></code> returns True, typing Ctrl-D causes the
interpreter to exit.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>(Cmd) ^D$
</pre></div>
</div>
<p>No newline is printed on exit, so the results are a little messy.</p>
</div>
<div class="section" id="command-arguments">
<h2>Command Arguments<a class="headerlink" href="#command-arguments" title="Permalink to this headline">¶</a></h2>
<p>This example includes a few enhancements to eliminate
some of the annoyances and add help for the <code class="docutils literal notranslate"><span class="pre">greet</span></code> command.</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">cmd_arguments.py</span><a class="headerlink" href="#id2" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">cmd</span>


<span class="k">class</span> <span class="nc">HelloWorld</span><span class="p">(</span><span class="n">cmd</span><span class="o">.</span><span class="n">Cmd</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">do_greet</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">person</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;greet [person]</span>
<span class="sd">        Greet the named person&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">person</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;hi,&quot;</span><span class="p">,</span> <span class="n">person</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;hi&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">do_EOF</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">postloop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">()</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">HelloWorld</span><span class="p">()</span><span class="o">.</span><span class="n">cmdloop</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>The docstring added to <code class="docutils literal notranslate"><span class="pre">do_greet()</span></code> becomes the help text for
the command:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ python3 cmd_arguments.py

(Cmd) help

Documented commands (type help &lt;topic&gt;):
========================================
greet  help

Undocumented commands:
======================
EOF

(Cmd) help greet
greet [person]
        Greet the named person
</pre></div>
</div>
<p>The output shows one optional argument to <code class="docutils literal notranslate"><span class="pre">greet</span></code>,
<code class="docutils literal notranslate"><span class="pre">person</span></code>. Although the argument is optional to the command, there is a
distinction between the command and the callback method. The method
always takes the argument, but sometimes the value is an empty
string. It is left up to the command handler to determine if an
empty argument is valid, or do any further parsing and processing of
the command. In this example, if a person’s name is provided then the
greeting is personalized.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>(Cmd) greet Alice
hi, Alice
(Cmd) greet
hi
</pre></div>
</div>
<p>Whether an argument is given by the user or not, the value passed to
the command handler does not include the command itself. That
simplifies parsing in the command handler, especially if multiple
arguments are needed.</p>
</div>
<div class="section" id="live-help">
<h2>Live Help<a class="headerlink" href="#live-help" title="Permalink to this headline">¶</a></h2>
<p>In the previous example, the formatting of the help text leaves
something to be desired. Since it comes from the docstring, it retains
the indentation from the source file. The source could be changed to
remove the extra white-space, but that would leave the application
code looking poorly formatted. A better solution is to implement a
help handler for the <code class="docutils literal notranslate"><span class="pre">greet</span></code> command, named
<code class="docutils literal notranslate"><span class="pre">help_greet()</span></code>. The help handler is called to produce help text
for the named command.</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">cmd_do_help.py</span><a class="headerlink" href="#id3" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Set up gnureadline as readline if installed.</span>
<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">gnureadline</span>
    <span class="kn">import</span> <span class="nn">sys</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="s1">&#39;readline&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gnureadline</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="k">pass</span>

<span class="kn">import</span> <span class="nn">cmd</span>


<span class="k">class</span> <span class="nc">HelloWorld</span><span class="p">(</span><span class="n">cmd</span><span class="o">.</span><span class="n">Cmd</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">do_greet</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">person</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">person</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;hi,&quot;</span><span class="p">,</span> <span class="n">person</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;hi&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">help_greet</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span>
            <span class="s1">&#39;greet [person]&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Greet the named person&#39;</span><span class="p">,</span>
        <span class="p">]))</span>

    <span class="k">def</span> <span class="nf">do_EOF</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">HelloWorld</span><span class="p">()</span><span class="o">.</span><span class="n">cmdloop</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>In this example, the text is static but formatted more nicely. It
would also be possible to use previous command state to tailor the
contents of the help text to the current context.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ python3 cmd_do_help.py

(Cmd) help greet
greet [person]
Greet the named person
</pre></div>
</div>
<p>It is up to the help handler to actually output the help message, and not
simply return the help text for handling elsewhere.</p>
</div>
<div class="section" id="auto-completion">
<h2>Auto-Completion<a class="headerlink" href="#auto-completion" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">Cmd</span></code> includes support for command completion based on the
names of the commands with handler methods. The user triggers
completion by hitting the tab key at an input prompt. When multiple
completions are possible, pressing tab twice prints a list of the
options.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The GNU libraries needed for <code class="docutils literal notranslate"><span class="pre">readline</span></code> are not available on all
platforms by default. In those cases, tab completion may not
work. See <a class="reference internal" href="../readline/index.html#module-readline" title="readline: The GNU readline library"><code class="xref py py-mod docutils literal notranslate"><span class="pre">readline</span></code></a> for tips on installing the necessary
libraries if your Python installation does not have them.</p>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ python3 cmd_do_help.py

(Cmd) &lt;tab&gt;&lt;tab&gt;
EOF    greet  help
(Cmd) h&lt;tab&gt;
(Cmd) help
</pre></div>
</div>
<p>Once the command is known, argument completion is handled by methods
with the prefix <code class="docutils literal notranslate"><span class="pre">complete_</span></code>. This allows new completion handlers to
assemble a list of possible completions using arbitrary criteria
(i.e., querying a database or looking at a file or directory on the
file system). In this case, the program has a hard-coded set of
“friends” who receive a less formal greeting than named or anonymous
strangers. A real program would probably save the list somewhere, and
read it once then cache the contents to be scanned as needed.</p>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text">cmd_arg_completion.py</span><a class="headerlink" href="#id4" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Set up gnureadline as readline if installed.</span>
<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">gnureadline</span>
    <span class="kn">import</span> <span class="nn">sys</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="s1">&#39;readline&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gnureadline</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="k">pass</span>

<span class="kn">import</span> <span class="nn">cmd</span>


<span class="k">class</span> <span class="nc">HelloWorld</span><span class="p">(</span><span class="n">cmd</span><span class="o">.</span><span class="n">Cmd</span><span class="p">):</span>

    <span class="n">FRIENDS</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Alice&#39;</span><span class="p">,</span> <span class="s1">&#39;Adam&#39;</span><span class="p">,</span> <span class="s1">&#39;Barbara&#39;</span><span class="p">,</span> <span class="s1">&#39;Bob&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">do_greet</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">person</span><span class="p">):</span>
        <span class="s2">&quot;Greet the person&quot;</span>
        <span class="k">if</span> <span class="n">person</span> <span class="ow">and</span> <span class="n">person</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">FRIENDS</span><span class="p">:</span>
            <span class="n">greeting</span> <span class="o">=</span> <span class="s1">&#39;hi, </span><span class="si">{}</span><span class="s1">!&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">person</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">person</span><span class="p">:</span>
            <span class="n">greeting</span> <span class="o">=</span> <span class="s1">&#39;hello, </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">person</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">greeting</span> <span class="o">=</span> <span class="s1">&#39;hello&#39;</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">greeting</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">complete_greet</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">begidx</span><span class="p">,</span> <span class="n">endidx</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">text</span><span class="p">:</span>
            <span class="n">completions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FRIENDS</span><span class="p">[:]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">completions</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">f</span>
                <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">FRIENDS</span>
                <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
            <span class="p">]</span>
        <span class="k">return</span> <span class="n">completions</span>

    <span class="k">def</span> <span class="nf">do_EOF</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">HelloWorld</span><span class="p">()</span><span class="o">.</span><span class="n">cmdloop</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>When there is input text, <code class="docutils literal notranslate"><span class="pre">complete_greet()</span></code> returns a list of
friends that match. Otherwise, the full list of friends is returned.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ python3 cmd_arg_completion.py

(Cmd) greet &lt;tab&gt;&lt;tab&gt;
Adam     Alice    Barbara  Bob
(Cmd) greet A&lt;tab&gt;&lt;tab&gt;
Adam   Alice
(Cmd) greet Ad&lt;tab&gt;
(Cmd) greet Adam
hi, Adam!
</pre></div>
</div>
<p>If the name given is not in the list of friends, the formal greeting
is given.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>(Cmd) greet Joe
hello, Joe
</pre></div>
</div>
</div>
<div class="section" id="overriding-base-class-methods">
<h2>Overriding Base Class Methods<a class="headerlink" href="#overriding-base-class-methods" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">Cmd</span></code> includes several methods that can be overridden as hooks
for taking actions or altering the base class behavior. This example
is not exhaustive, but contains many of the methods commonly useful.</p>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text">cmd_illustrate_methods.py</span><a class="headerlink" href="#id5" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Set up gnureadline as readline if installed.</span>
<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">gnureadline</span>
    <span class="kn">import</span> <span class="nn">sys</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="s1">&#39;readline&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gnureadline</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="k">pass</span>

<span class="kn">import</span> <span class="nn">cmd</span>


<span class="k">class</span> <span class="nc">Illustrate</span><span class="p">(</span><span class="n">cmd</span><span class="o">.</span><span class="n">Cmd</span><span class="p">):</span>
    <span class="s2">&quot;Illustrate the base class method use.&quot;</span>

    <span class="k">def</span> <span class="nf">cmdloop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">intro</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;cmdloop(</span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">intro</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">cmd</span><span class="o">.</span><span class="n">Cmd</span><span class="o">.</span><span class="n">cmdloop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">intro</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">preloop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;preloop()&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">postloop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;postloop()&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">parseline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;parseline(</span><span class="si">{!r}</span><span class="s1">) =&gt;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">line</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="n">cmd</span><span class="o">.</span><span class="n">Cmd</span><span class="o">.</span><span class="n">parseline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ret</span>

    <span class="k">def</span> <span class="nf">onecmd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;onecmd(</span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">cmd</span><span class="o">.</span><span class="n">Cmd</span><span class="o">.</span><span class="n">onecmd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">emptyline</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;emptyline()&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">cmd</span><span class="o">.</span><span class="n">Cmd</span><span class="o">.</span><span class="n">emptyline</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">default</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;default(</span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">line</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">cmd</span><span class="o">.</span><span class="n">Cmd</span><span class="o">.</span><span class="n">default</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">precmd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;precmd(</span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">line</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">cmd</span><span class="o">.</span><span class="n">Cmd</span><span class="o">.</span><span class="n">precmd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">postcmd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stop</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;postcmd(</span><span class="si">{}</span><span class="s1">, </span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">stop</span><span class="p">,</span> <span class="n">line</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">cmd</span><span class="o">.</span><span class="n">Cmd</span><span class="o">.</span><span class="n">postcmd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stop</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">do_greet</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;hello,&#39;</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">do_EOF</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
        <span class="s2">&quot;Exit&quot;</span>
        <span class="k">return</span> <span class="kc">True</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">Illustrate</span><span class="p">()</span><span class="o">.</span><span class="n">cmdloop</span><span class="p">(</span><span class="s1">&#39;Illustrating the methods of cmd.Cmd&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">cmdloop()</span></code> is the main processing loop of the
interpreter. Overriding it is usually not necessary, since the
<code class="docutils literal notranslate"><span class="pre">preloop()</span></code> and <code class="docutils literal notranslate"><span class="pre">postloop()</span></code> hooks are available.</p>
<p>Each iteration through <code class="docutils literal notranslate"><span class="pre">cmdloop()</span></code> calls <code class="docutils literal notranslate"><span class="pre">onecmd()</span></code> to
dispatch the command to its handler. The actual input line is parsed
with <code class="docutils literal notranslate"><span class="pre">parseline()</span></code> to create a tuple containing the command, and
the remaining portion of the line.</p>
<p>If the line is empty, <code class="docutils literal notranslate"><span class="pre">emptyline()</span></code> is called. The default
implementation runs the previous command again. If the line contains a
command, first <code class="docutils literal notranslate"><span class="pre">precmd()</span></code> is called then the handler is looked
up and invoked. If none is found, <code class="docutils literal notranslate"><span class="pre">default()</span></code> is called
instead. Finally <code class="docutils literal notranslate"><span class="pre">postcmd()</span></code> is called.</p>
<p>Here is an example session with <code class="docutils literal notranslate"><span class="pre">print</span></code> statements added:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ python3 cmd_illustrate_methods.py

cmdloop(Illustrating the methods of cmd.Cmd)
preloop()
Illustrating the methods of cmd.Cmd
(Cmd) greet Bob
precmd(greet Bob)
onecmd(greet Bob)
parseline(greet Bob) =&gt; (&#39;greet&#39;, &#39;Bob&#39;, &#39;greet Bob&#39;)
hello, Bob
postcmd(None, greet Bob)
(Cmd) ^Dprecmd(EOF)
onecmd(EOF)
parseline(EOF) =&gt; (&#39;EOF&#39;, &#39;&#39;, &#39;EOF&#39;)
postcmd(True, EOF)
postloop()
</pre></div>
</div>
</div>
<div class="section" id="configuring-cmd-through-attributes">
<h2>Configuring Cmd Through Attributes<a class="headerlink" href="#configuring-cmd-through-attributes" title="Permalink to this headline">¶</a></h2>
<p>In addition to the methods described earlier, there are several
attributes for controlling command interpreters.  <code class="xref py py-attr docutils literal notranslate"><span class="pre">prompt</span></code> can
be set to a string to be printed each time the user is asked for a new
command.  <code class="xref py py-attr docutils literal notranslate"><span class="pre">intro</span></code> is the “welcome” message printed at the start
of the program. <code class="docutils literal notranslate"><span class="pre">cmdloop()</span></code> takes an argument for this value, or
it can be set on the class directly.  When printing help, the
<code class="xref py py-attr docutils literal notranslate"><span class="pre">doc_header</span></code>, <code class="xref py py-attr docutils literal notranslate"><span class="pre">misc_header</span></code>, <code class="xref py py-attr docutils literal notranslate"><span class="pre">undoc_header</span></code>, and
<code class="xref py py-attr docutils literal notranslate"><span class="pre">ruler</span></code> attributes are used to format the output.</p>
<div class="literal-block-wrapper docutils container" id="id6">
<div class="code-block-caption"><span class="caption-text">cmd_attributes.py</span><a class="headerlink" href="#id6" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">cmd</span>


<span class="k">class</span> <span class="nc">HelloWorld</span><span class="p">(</span><span class="n">cmd</span><span class="o">.</span><span class="n">Cmd</span><span class="p">):</span>

    <span class="n">prompt</span> <span class="o">=</span> <span class="s1">&#39;prompt: &#39;</span>
    <span class="n">intro</span> <span class="o">=</span> <span class="s2">&quot;Simple command processor example.&quot;</span>

    <span class="n">doc_header</span> <span class="o">=</span> <span class="s1">&#39;doc_header&#39;</span>
    <span class="n">misc_header</span> <span class="o">=</span> <span class="s1">&#39;misc_header&#39;</span>
    <span class="n">undoc_header</span> <span class="o">=</span> <span class="s1">&#39;undoc_header&#39;</span>

    <span class="n">ruler</span> <span class="o">=</span> <span class="s1">&#39;-&#39;</span>

    <span class="k">def</span> <span class="nf">do_prompt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
        <span class="s2">&quot;Change the interactive prompt&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prompt</span> <span class="o">=</span> <span class="n">line</span> <span class="o">+</span> <span class="s1">&#39;: &#39;</span>

    <span class="k">def</span> <span class="nf">do_EOF</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">HelloWorld</span><span class="p">()</span><span class="o">.</span><span class="n">cmdloop</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>This example class shows a command handler to let the user control
the prompt for the interactive session.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ python3 cmd_attributes.py

Simple command processor example.
prompt: prompt hello
hello: help

doc_header
----------
help  prompt

undoc_header
------------
EOF

hello:
</pre></div>
</div>
</div>
<div class="section" id="running-shell-commands">
<h2>Running Shell Commands<a class="headerlink" href="#running-shell-commands" title="Permalink to this headline">¶</a></h2>
<p>To supplement the standard command processing, <code class="docutils literal notranslate"><span class="pre">Cmd</span></code> includes
two special command prefixes. A question mark (<code class="docutils literal notranslate"><span class="pre">?</span></code>) is equivalent to
the built-in <code class="docutils literal notranslate"><span class="pre">help</span></code> command, and can be used in the same
way. An exclamation point (<code class="docutils literal notranslate"><span class="pre">!</span></code>) maps to <code class="docutils literal notranslate"><span class="pre">do_shell()</span></code>, and is
intended for “shelling out” to run other commands, as in this example.</p>
<div class="literal-block-wrapper docutils container" id="id7">
<div class="code-block-caption"><span class="caption-text">cmd_do_shell.py</span><a class="headerlink" href="#id7" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">cmd</span>
<span class="kn">import</span> <span class="nn">subprocess</span>


<span class="k">class</span> <span class="nc">ShellEnabled</span><span class="p">(</span><span class="n">cmd</span><span class="o">.</span><span class="n">Cmd</span><span class="p">):</span>

    <span class="n">last_output</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

    <span class="k">def</span> <span class="nf">do_shell</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
        <span class="s2">&quot;Run a shell command&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;running shell command:&quot;</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span>
        <span class="n">sub_cmd</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span><span class="n">line</span><span class="p">,</span>
                                   <span class="n">shell</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                   <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">)</span>
        <span class="n">output</span> <span class="o">=</span> <span class="n">sub_cmd</span><span class="o">.</span><span class="n">communicate</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">last_output</span> <span class="o">=</span> <span class="n">output</span>

    <span class="k">def</span> <span class="nf">do_echo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Print the input, replacing &#39;$out&#39; with</span>
<span class="sd">        the output of the last shell command.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Obviously not robust</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;$out&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_output</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">do_EOF</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">ShellEnabled</span><span class="p">()</span><span class="o">.</span><span class="n">cmdloop</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>This <code class="docutils literal notranslate"><span class="pre">echo</span></code> command implementation replaces the string
<code class="docutils literal notranslate"><span class="pre">$out</span></code> in its argument with the output from the previous shell
command.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ python3 cmd_do_shell.py

(Cmd) ?

Documented commands (type help &lt;topic&gt;):
========================================
echo  help  shell

Undocumented commands:
======================
EOF

(Cmd) ? shell
Run a shell command
(Cmd) ? echo
Print the input, replacing &#39;$out&#39; with
        the output of the last shell command
(Cmd) shell pwd
running shell command: pwd
.../pymotw-3/source/cmd

(Cmd) ! pwd
running shell command: pwd
.../pymotw-3/source/cmd

(Cmd) echo $out
.../pymotw-3/source/cmd
</pre></div>
</div>
</div>
<div class="section" id="alternative-inputs">
<h2>Alternative Inputs<a class="headerlink" href="#alternative-inputs" title="Permalink to this headline">¶</a></h2>
<p>While the default mode for <code class="docutils literal notranslate"><span class="pre">Cmd()</span></code> is to interact with the user
through the <a class="reference internal" href="../readline/index.html#module-readline" title="readline: The GNU readline library"><code class="xref py py-mod docutils literal notranslate"><span class="pre">readline</span></code></a> library, it is also possible to pass a
series of commands in to standard input using standard Unix shell
redirection.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ echo help | python3 cmd_do_help.py

(Cmd)
Documented commands (type help &lt;topic&gt;):
========================================
greet  help

Undocumented commands:
======================
EOF

(Cmd)
</pre></div>
</div>
<p>To have the program read a script file directly, a few other changes
may be needed. Since <a class="reference internal" href="../readline/index.html#module-readline" title="readline: The GNU readline library"><code class="xref py py-mod docutils literal notranslate"><span class="pre">readline</span></code></a> interacts with the terminal/tty
device, rather than the standard input stream, it should be disabled
when the script is going to be reading from a file. Also, to avoid
printing superfluous prompts, the prompt can be set to an empty
string. This example shows how to open a file and pass it as input to
a modified version of the <code class="docutils literal notranslate"><span class="pre">HelloWorld</span></code> example.</p>
<div class="literal-block-wrapper docutils container" id="id8">
<div class="code-block-caption"><span class="caption-text">cmd_file.py</span><a class="headerlink" href="#id8" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">cmd</span>


<span class="k">class</span> <span class="nc">HelloWorld</span><span class="p">(</span><span class="n">cmd</span><span class="o">.</span><span class="n">Cmd</span><span class="p">):</span>

    <span class="c1"># Disable rawinput module use</span>
    <span class="n">use_rawinput</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="c1"># Do not show a prompt after each command read</span>
    <span class="n">prompt</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

    <span class="k">def</span> <span class="nf">do_greet</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;hello,&quot;</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">do_EOF</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">sys</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s1">&#39;rt&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="nb">input</span><span class="p">:</span>
        <span class="n">HelloWorld</span><span class="p">(</span><span class="n">stdin</span><span class="o">=</span><span class="nb">input</span><span class="p">)</span><span class="o">.</span><span class="n">cmdloop</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>With <code class="docutils literal notranslate"><span class="pre">use_rawinput</span></code> set to False and <code class="docutils literal notranslate"><span class="pre">prompt</span></code> set to an empty
string, the script can be called on an input file with one command on
each line.</p>
<div class="literal-block-wrapper docutils container" id="id9">
<div class="code-block-caption"><span class="caption-text">cmd_file.txt</span><a class="headerlink" href="#id9" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">greet</span>
<span class="n">greet</span> <span class="n">Alice</span> <span class="ow">and</span> <span class="n">Bob</span>
</pre></div>
</div>
</div>
<p>Running the example script with the example input produces the
following output.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ python3 cmd_file.py cmd_file.txt

hello,
hello, Alice and Bob
</pre></div>
</div>
</div>
<div class="section" id="commands-from-sys-argv">
<h2>Commands from sys.argv<a class="headerlink" href="#commands-from-sys-argv" title="Permalink to this headline">¶</a></h2>
<p>Command line arguments to the program can also be processed as
commands for the interpreter class, instead of reading commands from
the console or a file.  To use the command line arguments, call
<code class="docutils literal notranslate"><span class="pre">onecmd()</span></code> directly, as in this example.</p>
<div class="literal-block-wrapper docutils container" id="id10">
<div class="code-block-caption"><span class="caption-text">cmd_argv.py</span><a class="headerlink" href="#id10" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">cmd</span>


<span class="k">class</span> <span class="nc">InteractiveOrCommandLine</span><span class="p">(</span><span class="n">cmd</span><span class="o">.</span><span class="n">Cmd</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Accepts commands via the normal interactive</span>
<span class="sd">    prompt or on the command line.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">do_greet</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;hello,&#39;</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">do_EOF</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">sys</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">InteractiveOrCommandLine</span><span class="p">()</span><span class="o">.</span><span class="n">onecmd</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">:]))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">InteractiveOrCommandLine</span><span class="p">()</span><span class="o">.</span><span class="n">cmdloop</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>Since <code class="docutils literal notranslate"><span class="pre">onecmd()</span></code> takes a single string as input, the arguments
to the program need to be joined together before being passed in.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ python3 cmd_argv.py greet Command-Line User

hello, Command-Line User

$ python3 cmd_argv.py

(Cmd) greet Interactive User
hello, Interactive User
(Cmd)
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<ul class="last simple">
<li><a class="reference external" href="https://docs.python.org/3.7/library/cmd.html">Standard library documentation for cmd</a></li>
<li><a class="reference external" href="http://pypi.python.org/pypi/cmd2">cmd2</a> – Drop-in
replacement for <code class="docutils literal notranslate"><span class="pre">cmd</span></code> with additional features.</li>
<li><a class="reference external" href="http://tiswww.case.edu/php/chet/readline/rltop.html">GNU readline</a> – The GNU Readline library provides functions
that allow users to edit input lines as they are typed.</li>
<li><a class="reference internal" href="../readline/index.html#module-readline" title="readline: The GNU readline library"><code class="xref py py-mod docutils literal notranslate"><span class="pre">readline</span></code></a> – The Python standard library interface to
readline.</li>
<li><a class="reference internal" href="../subprocess/index.html#module-subprocess" title="subprocess: Spawning additional processes"><code class="xref py py-mod docutils literal notranslate"><span class="pre">subprocess</span></code></a> – Managing other processes and their output.</li>
</ul>
</div>
</div>
</div>



        <div id="footer-nav">
<a id="prev-link" href="../getpass/index.html"
   title="previous chapter"><i class="fa fa-arrow-circle-left"></i> getpass — Secure Password Prompt</a>
<a id="next-link" href="../shlex/index.html"
   title="next chapter">shlex — Parse Shell-style Syntaxes <i class="fa fa-arrow-circle-right"></i></a>
        </div>

        </div>
      </div>

      <div class="pure-u-1-4">
        <div class="sidebar-wrapper">
          <div class="sidebar">
<div id="sidebar-toc">
  <h5>Quick Links</h5>
  <ul>
    
    <li><a href="#processing-commands"><i class="fa fa-caret-right"></i>Processing Commands</a></li>
    
    <li><a href="#command-arguments"><i class="fa fa-caret-right"></i>Command Arguments</a></li>
    
    <li><a href="#live-help"><i class="fa fa-caret-right"></i>Live Help</a></li>
    
    <li><a href="#auto-completion"><i class="fa fa-caret-right"></i>Auto-Completion</a></li>
    
    <li><a href="#overriding-base-class-methods"><i class="fa fa-caret-right"></i>Overriding Base Class Methods</a></li>
    
    <li><a href="#configuring-cmd-through-attributes"><i class="fa fa-caret-right"></i>Configuring Cmd Through Attributes</a></li>
    
    <li><a href="#running-shell-commands"><i class="fa fa-caret-right"></i>Running Shell Commands</a></li>
    
    <li><a href="#alternative-inputs"><i class="fa fa-caret-right"></i>Alternative Inputs</a></li>
    
    <li><a href="#commands-from-sys-argv"><i class="fa fa-caret-right"></i>Commands from sys.argv</a></li>
    
  </ul>
</div>

          </div>
          <div class="sidebar"><div id="sidebar-last-updated">
  This page was last updated 2016-12-30.
</div>

          </div>
          <div class="sidebar">
<div id="sidebar-nav">
  <h5>Navigation</h5>
  <ul>
    <li><a href="../getpass/index.html"
           title="previous chapter"><i class="fa fa-arrow-circle-left"></i>getpass — Secure Password Prompt</a></li>
    <li><a href="../shlex/index.html"
           title="next chapter"><i class="fa fa-arrow-circle-right"></i>shlex — Parse Shell-style Syntaxes</a></li>
  </ul>
</div>
          </div>
          <div class="sidebar"><div id="sidebar-book"><a target="new" href="https://doughellmann.com/blog/the-python-3-standard-library-by-example/"><img src="../_static/book-cover-image-med.jpg"><br>Get the book</a></div>
          </div>
          <div class="sidebar"><div id="sidebar-example-disclaimer">
<p>The output from all the example programs
from PyMOTW-3 has been generated with Python 3.7.9, unless
otherwise noted. Some of the features described here may not be
available in earlier versions of Python.</p>
<p>Looking for <a href="/2/">examples for Python 2</a>?</p>
</div>
          </div>

        </div>
      </div>

    </div>

    <div class="pure-g-r" id="footer">

      <div class="pure-u-1-3">
        <div class="footer-list">
            <h4>This Site</h4>
            <ul>
              <li><a href="../py-modindex.html"><i class="fa fa-list fa-lg"></i> Module Index</a></li>
              <li><a href="../genindex.html"><i class="fa fa-italic fa-lg"></i> Index</a></li>
            </ul>
        </div>
      </div><div class="pure-u-1-3">
          <div class="footer-content">
            <div class="socialmedia">
              <a class="sociallink" href="../index.html"
       title="Home">
      <i class="fa fa-home fa-lg"></i></a>
              <a class="sociallink" href="../about.html"
       title="About">
      <i class="fa fa-user fa-lg"></i></a>
              <a class="sociallink" href="http://www.twitter.com/pymotw"
       title="Twitter">
      <i class="fa fa-twitter fa-lg"></i></a>
              <a class="sociallink" href="http://feeds.doughellmann.com/PyMOTW"
       title="Subscribe via RSS">
      <i class="fa fa-rss-square fa-lg"></i></a>
              <a class="sociallink" href="http://feedburner.google.com/fb/a/mailverify?uri=PyMOTW&amp;loc=en_US"
       title="Subscribe via Email">
      <i class="fa fa-envelope fa-lg"></i></a>
            </div>

            <div class="copyright">
              <a rel="author" href="../about.html">&copy; Copyright 2021, Doug Hellmann</a>
            </div>

            <div class="cc"><a href="http://creativecommons.org/licenses/by-nc-sa/4.0/deed.en_US" rel="license"><img alt="Creative Commons License BY-NC-SA" style="border-width:0; align: center;" width="88" height="31" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAAAfCAMAAABUFvrSAAAABGdBTUEAALGOfPtRkwAAAf5QTFRF////////////AAAADQwNDQ4NDg4OEBAQGRkZGxsbHxscICAgIx8gJCQkKCUmKCgoKCkoKSkpKSopKicnKioqLS0tMDAwMS0uMjExMjMxNTY1Pj8+Pzc5Pzs8QEBAQ0RDUFBQUFFQWldYXV5dYGBgY19haGVmbmxscHBwcHJvdXJzdnN0eHV2eXx5en15fH98fX98fnt8f4F+gICAgoWChIGChIWEhIaEh4aHiYyJjIqLjoeLj4+PkY+PkZORkZSRk5iTlZmUlpmWmJaXmpiZnp2dnqCdn5aan5+fn6Oeoqaho6Gho6ijpqqmq7GqrKurrLKrrbOsrrOtrrStr6+vr7Kvr7Sur7WusLOvsLWvsLavsbewsrexsrixs7iytLmztLqztbW1tbq0tru1t7y2uL23ub64ub65urm5ur+5ur+6u8C6u8C7vMC8vMG7vMG8vcK8vcK9vsK9vsO+v7+/v8O+v8S+wMS/wMW/wMXAwcXAwsfCw8fCw8jDxMfDxMjDxMnExcnExcnFxsrFxsrGx8vHyMfHyMzHyMzIycjIyc3Iyc3Jys3Jy8rLy87Ky8/Ky8/LzM/LzNDLzNDMzdDMzdHMzdHNztHNztLOz8/Pz9PP0NPP0NTQ0dTQ0dTR0tXR0tXS09bS1tXV39/f4N/g4+Pj6Ofn7+/v8fHx////rrSdFQAAAAN0Uk5TAAoO5yEBUwAAA+FJREFUSMe1lo9301QUx6uXUmaf0qJ26iTrRoVinUzjQNR1gAyH6Lqx6XTDoVvXbU7qhA5m7CgYWaTDlLa6AiFsba3t+y+9Sdr8OvVMi7zTnLTf5H7ee9/73n11PA1PpDkcADPRWPwKt8YLG2I2n89m7gh8iluJz0dnpqe+HBsdHRn+7w3JyF1cvpbk05mCJG8Xi9uPpMLdNJ9cXV5UyBNjoyMtkR2A3B9Tt8SCfLTTqUzC2XlMvpcRbnA/IPmryYnzoyM9XuWBt8eI21FBcAy5Qk4KtxkGtQ1I+fRNbnk+evHC5NhJDwATDDIAnhNa1ImdFQTHr6WEvNyFPFeATSTYgAu/dl3/I31jNR6bnZ76eDf4yxRb2Q+71aiz/0JB8JXkrZzCdbFVqrUhRHuu54XkytLczAUvBFADUB6ARwnyqEp/t02prK9XdAXBHC9KyPWVqd6qPhyzlOG55dhsL/hLDTD1A3rYAy+dRu6eXaGKruA75wi2hbqigNd+LYSRW6XUSh64l05dXYruA1OPZfAOD3vhObL/ILDvQkRXynSdvPpaiJB+TVHAfEZuA9d9amlVF7TJd3nu+xgwyu8AqNOnDGAM8/obOLhQpWQotPYReZ/SQdKuKQpY2DwKwFJbGwI4VhCSlxchSFUnNC+CCgaV9RAKoZKh1J4le9FmQv5SFQW88aATXGhEws8wrHb7AANc0CndQS+ag5ERaieke0FXvnkxoYL/1MGi7FSmmVBXMDOu3gLK5J2PMjdXv2tmBX6pDdKSkq39DWXh3G1KI4QYVmS3AHCIPnCXE+4hHy6PcfeQ6sV2lufiL2jJ0wasp4p2k/Z2CEXeeqahDBLS1/c8+dBIXq4IkFAiWQ1QtxtnUMz/wsXfBj+1LzdUKn17dvXXzEqfMoFDNWO57QCe22dskKB5g7zXbVN+i0RKumKxonrfzaIVys2wYu7TVrd0PXn1rOnJC4JTFjF5c19/gnXLFwj6jJJz1rOjoi63LnBRfbmNM+qNunG5baSufhu9OPX5my2VTWEzrHrRbIP8dHl+dnpyrIVDBME/q1u6/E9bGmt9i2AsQmeaFaFwIb22soSlfuL8SEtgOCJKB5BsKkNltWyK7zzWMY3X4exDc6GvsljoX5FzR+BxwdCbf3jAdjTJv5/S39H2B2iXpmgXpWB7iVrB0JuVzpgP07CUO2WKqX+oiVL/benKImhgOIzHf7hx/A/IBdHsQ6Nsmruilo4afVFqB8PLn2U2H8hbxeKWjH9YvuiwxNiMaNhALZptCg5d7zh+Sczmclnx0vEOax6ajdjucSMPTcD/97/Cp54Q929ZZbgcR3o0hAAAAABJRU5ErkJggg=="/></a>
            </div>

          </div></div><div class="pure-u-1-3">
          <div class="footer-list">
            <h4>Other Writing</h4>
            <ul>
              <li><a href="https://doughellmann.com/"><i class="fa fa-pencil fa-lg"></i> Blog</a></li>
              <li><a href="https://doughellmann.com/blog/the-python-standard-library-by-example/"><i class="fa fa-book fa-lg"></i> The Python Standard Library By Example</a></li>
            </ul>
          </div>
        </div><script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-38546875-3', 'pymotw.com');
  ga('send', 'pageview');
</script>

  </body>
</html>
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>locale — Cultural Localization API &mdash; PyMOTW 3</title>

    <link rel="stylesheet" href="../_static/pure-min.css" type="text/css">
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/font-awesome/css/font-awesome.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pymotw.css" type="text/css">

    <link rel="shortcut icon" type="image/png" href="../_static/favicon.png">

    <link rel="alternate" type="application/atom+xml"
          title="Doug Hellmann"
          href="http://feeds.doughellmann.com/DougHellmann" />
    <link rel="alternate" type="application/atom+xml"
          title="PyMOTW Updates"
          href="http://feeds.doughellmann.com/PyMOTW" />

    <meta name="verify-v1" content="5saTcOa2HLac4V85yUg3SARfun1PqT5Upu7IR/6fpv4="/>

    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@pymotw" />
    <meta name="twitter:title" content="locale — Cultural Localization API" />
    <meta name="twitter:image" content="https://pymotw.com/3/_static/logo-large.png" />

  </head>
  <body>

    <div class="pure-menu pure-menu-open pure-menu-horizontal" id="site-menu">
      <a class="pure-menu-heading" href="../index.html"><img src="../_static/logo.png"> PyMOTW-3</a>

      <ul id="top-menu">
        <li class="pure-menu-selected"><a href="../py-modindex.html"><i class="fa fa-list fa-lg"></i> Module Index</a></li>
        <li class="pure-menu-selected"><a href="../genindex.html"><i class="fa fa-italic fa-lg"></i> Index</a></li>
        <li class="pure-menu-selected"><a class="sociallink" href="http://www.twitter.com/pymotw"
       title="Twitter">
      <i class="fa fa-twitter fa-lg"></i></a></a>
        <li class="pure-menu-selected"><a class="sociallink" href="http://feeds.doughellmann.com/PyMOTW"
       title="Subscribe via RSS">
      <i class="fa fa-rss-square fa-lg"></i></a></li>
      </ul>

    </div>

    <div class="pure-menu pure-menu-open pure-menu-vertical" id="breadcrumbs-menu">
      
      <ul id="breadcrumbs">
        <li class="pure-menu-selected"><a href="../i18n.html"><i class="fa fa-arrow-circle-up"></i> Internationalization and Localization</a></li>
      </ul>
    </div>

    <div class="pure-g-r" id="content-container">

      <div class="pure-u-3-4">
        <div class="content">
          
  <div class="section" id="module-locale">
<span id="locale-cultural-localization-api"></span><h1>locale — Cultural Localization API<a class="headerlink" href="#module-locale" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Purpose:</th><td class="field-body">Format and parse values that depend on location or language.</td>
</tr>
</tbody>
</table>
<p>The <code class="docutils literal notranslate"><span class="pre">locale</span></code> module is part of Python’s internationalization and
localization support library. It provides a standard way to handle
operations that may depend on the language or location of a user. For
example, it handles formatting numbers as currency, comparing strings
for sorting, and working with dates. It does not cover translation
(see the <a class="reference internal" href="../gettext/index.html#module-gettext" title="gettext: Message Catalogs"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gettext</span></code></a> module) or Unicode encoding (see the
<a class="reference internal" href="../codecs/index.html#module-codecs" title="codecs: String encoding and decoding."><code class="xref py py-mod docutils literal notranslate"><span class="pre">codecs</span></code></a> module).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Changing the locale can have application-wide ramifications, so the
recommended practice is to avoid changing the value in a library and
to let the application set it one time. In the examples in this
section, the locale is changed several times within a short program
to highlight the differences in the settings of various locales. It
is far more likely that an application will set the locale once as
it starts up or when a web request is received and not change it.</p>
</div>
<p>This section covers some of the high-level functions in the
<code class="docutils literal notranslate"><span class="pre">locale</span></code> module. There are others which are lower level
or which relate to managing the locale for an
application (<code class="docutils literal notranslate"><span class="pre">resetlocale()</span></code>).</p>
<div class="section" id="probing-the-current-locale">
<h2>Probing the Current Locale<a class="headerlink" href="#probing-the-current-locale" title="Permalink to this headline">¶</a></h2>
<p>The most common way to let the user change the locale settings for an
application is through an environment variable (<code class="docutils literal notranslate"><span class="pre">LC_ALL</span></code>,
<code class="docutils literal notranslate"><span class="pre">LC_CTYPE</span></code>, <code class="docutils literal notranslate"><span class="pre">LANG</span></code>, or <code class="docutils literal notranslate"><span class="pre">LANGUAGE</span></code>, depending on the
platform). The application then calls <code class="docutils literal notranslate"><span class="pre">setlocale()</span></code> without a
hard-coded value, and the environment value is used.</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">locale_env.py</span><a class="headerlink" href="#id1" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">locale</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">pprint</span>

<span class="c1"># Default settings based on the user&#39;s environment.</span>
<span class="n">locale</span><span class="o">.</span><span class="n">setlocale</span><span class="p">(</span><span class="n">locale</span><span class="o">.</span><span class="n">LC_ALL</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Environment settings:&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">env_name</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;LC_ALL&#39;</span><span class="p">,</span> <span class="s1">&#39;LC_CTYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;LANG&#39;</span><span class="p">,</span> <span class="s1">&#39;LANGUAGE&#39;</span><span class="p">]:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  </span><span class="si">{}</span><span class="s1"> = </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">env_name</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">env_name</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">))</span>
    <span class="p">)</span>

<span class="c1"># What is the locale?</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Locale from environment:&#39;</span><span class="p">,</span> <span class="n">locale</span><span class="o">.</span><span class="n">getlocale</span><span class="p">())</span>

<span class="n">template</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">Numeric formatting:</span>

<span class="s2">  Decimal point      : &quot;</span><span class="si">{decimal_point}</span><span class="s2">&quot;</span>
<span class="s2">  Grouping positions : </span><span class="si">{grouping}</span><span class="s2"></span>
<span class="s2">  Thousands separator: &quot;</span><span class="si">{thousands_sep}</span><span class="s2">&quot;</span>

<span class="s2">Monetary formatting:</span>

<span class="s2">  International currency symbol   : &quot;</span><span class="si">{int_curr_symbol!r}</span><span class="s2">&quot;</span>
<span class="s2">  Local currency symbol           : </span><span class="si">{currency_symbol!r}</span><span class="s2"></span>
<span class="s2">  Symbol precedes positive value  : </span><span class="si">{p_cs_precedes}</span><span class="s2"></span>
<span class="s2">  Symbol precedes negative value  : </span><span class="si">{n_cs_precedes}</span><span class="s2"></span>
<span class="s2">  Decimal point                   : &quot;</span><span class="si">{mon_decimal_point}</span><span class="s2">&quot;</span>
<span class="s2">  Digits in fractional values     : </span><span class="si">{frac_digits}</span><span class="s2"></span>
<span class="s2">  Digits in fractional values,</span>
<span class="s2">                   international  : </span><span class="si">{int_frac_digits}</span><span class="s2"></span>
<span class="s2">  Grouping positions              : </span><span class="si">{mon_grouping}</span><span class="s2"></span>
<span class="s2">  Thousands separator             : &quot;</span><span class="si">{mon_thousands_sep}</span><span class="s2">&quot;</span>
<span class="s2">  Positive sign                   : &quot;</span><span class="si">{positive_sign}</span><span class="s2">&quot;</span>
<span class="s2">  Positive sign position          : </span><span class="si">{p_sign_posn}</span><span class="s2"></span>
<span class="s2">  Negative sign                   : &quot;</span><span class="si">{negative_sign}</span><span class="s2">&quot;</span>
<span class="s2">  Negative sign position          : </span><span class="si">{n_sign_posn}</span><span class="s2"></span>

<span class="s2">&quot;&quot;&quot;</span>

<span class="n">sign_positions</span> <span class="o">=</span> <span class="p">{</span>
    <span class="mi">0</span><span class="p">:</span> <span class="s1">&#39;Surrounded by parentheses&#39;</span><span class="p">,</span>
    <span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;Before value and symbol&#39;</span><span class="p">,</span>
    <span class="mi">2</span><span class="p">:</span> <span class="s1">&#39;After value and symbol&#39;</span><span class="p">,</span>
    <span class="mi">3</span><span class="p">:</span> <span class="s1">&#39;Before value&#39;</span><span class="p">,</span>
    <span class="mi">4</span><span class="p">:</span> <span class="s1">&#39;After value&#39;</span><span class="p">,</span>
    <span class="n">locale</span><span class="o">.</span><span class="n">CHAR_MAX</span><span class="p">:</span> <span class="s1">&#39;Unspecified&#39;</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">info</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">info</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">locale</span><span class="o">.</span><span class="n">localeconv</span><span class="p">())</span>
<span class="n">info</span><span class="p">[</span><span class="s1">&#39;p_sign_posn&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sign_positions</span><span class="p">[</span><span class="n">info</span><span class="p">[</span><span class="s1">&#39;p_sign_posn&#39;</span><span class="p">]]</span>
<span class="n">info</span><span class="p">[</span><span class="s1">&#39;n_sign_posn&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sign_positions</span><span class="p">[</span><span class="n">info</span><span class="p">[</span><span class="s1">&#39;n_sign_posn&#39;</span><span class="p">]]</span>

<span class="nb">print</span><span class="p">(</span><span class="n">template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">info</span><span class="p">))</span>
</pre></div>
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">localeconv()</span></code> method returns a dictionary containing the
locale’s conventions.  The full list of value names and definitions is
covered in the standard library documentation.</p>
<p>A Mac running OS X 10.11.6 with all of the variables unset produces
this output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ LANG= LC_CTYPE= PYTHONCOERCECLOCALE=0 python3 locale_env.py

Environment settings:
  LC_ALL =
  LC_CTYPE =
  LANG =
  LANGUAGE =

Locale from environment: (None, None)

Numeric formatting:

  Decimal point      : &quot;.&quot;
  Grouping positions : []
  Thousands separator: &quot;&quot;

Monetary formatting:

  International currency symbol   : &quot;&#39;&#39;&quot;
  Local currency symbol           : &#39;&#39;
  Symbol precedes positive value  : 127
  Symbol precedes negative value  : 127
  Decimal point                   : &quot;&quot;
  Digits in fractional values     : 127
  Digits in fractional values,
                   international  : 127
  Grouping positions              : []
  Thousands separator             : &quot;&quot;
  Positive sign                   : &quot;&quot;
  Positive sign position          : Unspecified
  Negative sign                   : &quot;&quot;
  Negative sign position          : Unspecified
</pre></div>
</div>
<p>Running the same script with the <code class="docutils literal notranslate"><span class="pre">LANG</span></code> variable set shows how
the locale and default encoding change.</p>
<p>The United States (<code class="docutils literal notranslate"><span class="pre">en_US</span></code>):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ LANG=en_US LC_CTYPE=en_US LC_ALL=en_US python3 locale_env.py

Environment settings:
  LC_ALL = en_US
  LC_CTYPE = en_US
  LANG = en_US
  LANGUAGE =

Locale from environment: (&#39;en_US&#39;, &#39;ISO8859-1&#39;)

Numeric formatting:

  Decimal point      : &quot;.&quot;
  Grouping positions : [3, 3, 0]
  Thousands separator: &quot;,&quot;

Monetary formatting:

  International currency symbol   : &quot;&#39;USD &#39;&quot;
  Local currency symbol           : &#39;$&#39;
  Symbol precedes positive value  : 1
  Symbol precedes negative value  : 1
  Decimal point                   : &quot;.&quot;
  Digits in fractional values     : 2
  Digits in fractional values,
                   international  : 2
  Grouping positions              : [3, 3, 0]
  Thousands separator             : &quot;,&quot;
  Positive sign                   : &quot;&quot;
  Positive sign position          : Before value and symbol
  Negative sign                   : &quot;-&quot;
  Negative sign position          : Before value and symbol
</pre></div>
</div>
<p>France (<code class="docutils literal notranslate"><span class="pre">fr_FR</span></code>):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ LANG=fr_FR LC_CTYPE=fr_FR LC_ALL=fr_FR python3 locale_env.py

Environment settings:
  LC_ALL = fr_FR
  LC_CTYPE = fr_FR
  LANG = fr_FR
  LANGUAGE =

Locale from environment: (&#39;fr_FR&#39;, &#39;ISO8859-1&#39;)

Numeric formatting:

  Decimal point      : &quot;,&quot;
  Grouping positions : [127]
  Thousands separator: &quot;&quot;

Monetary formatting:

  International currency symbol   : &quot;&#39;EUR &#39;&quot;
  Local currency symbol           : &#39;Eu&#39;
  Symbol precedes positive value  : 0
  Symbol precedes negative value  : 0
  Decimal point                   : &quot;,&quot;
  Digits in fractional values     : 2
  Digits in fractional values,
                   international  : 2
  Grouping positions              : [3, 3, 0]
  Thousands separator             : &quot; &quot;
  Positive sign                   : &quot;&quot;
  Positive sign position          : Before value and symbol
  Negative sign                   : &quot;-&quot;
  Negative sign position          : After value and symbol
</pre></div>
</div>
<p>Spain (<code class="docutils literal notranslate"><span class="pre">es_ES</span></code>):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ LANG=es_ES LC_CTYPE=es_ES LC_ALL=es_ES python3 locale_env.py

Environment settings:
  LC_ALL = es_ES
  LC_CTYPE = es_ES
  LANG = es_ES
  LANGUAGE =

Locale from environment: (&#39;es_ES&#39;, &#39;ISO8859-1&#39;)

Numeric formatting:

  Decimal point      : &quot;,&quot;
  Grouping positions : [127]
  Thousands separator: &quot;&quot;

Monetary formatting:

  International currency symbol   : &quot;&#39;EUR &#39;&quot;
  Local currency symbol           : &#39;Eu&#39;
  Symbol precedes positive value  : 0
  Symbol precedes negative value  : 0
  Decimal point                   : &quot;,&quot;
  Digits in fractional values     : 2
  Digits in fractional values,
                   international  : 2
  Grouping positions              : [3, 3, 0]
  Thousands separator             : &quot;.&quot;
  Positive sign                   : &quot;&quot;
  Positive sign position          : Before value and symbol
  Negative sign                   : &quot;-&quot;
  Negative sign position          : Before value and symbol
</pre></div>
</div>
<p>Portugal (<code class="docutils literal notranslate"><span class="pre">pt_PT</span></code>):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ LANG=pt_PT LC_CTYPE=pt_PT LC_ALL=pt_PT python3 locale_env.py

Environment settings:
  LC_ALL = pt_PT
  LC_CTYPE = pt_PT
  LANG = pt_PT
  LANGUAGE =

Locale from environment: (&#39;pt_PT&#39;, &#39;ISO8859-1&#39;)

Numeric formatting:

  Decimal point      : &quot;,&quot;
  Grouping positions : []
  Thousands separator: &quot; &quot;

Monetary formatting:

  International currency symbol   : &quot;&#39;EUR &#39;&quot;
  Local currency symbol           : &#39;Eu&#39;
  Symbol precedes positive value  : 0
  Symbol precedes negative value  : 0
  Decimal point                   : &quot;.&quot;
  Digits in fractional values     : 2
  Digits in fractional values,
                   international  : 2
  Grouping positions              : [3, 3, 0]
  Thousands separator             : &quot;.&quot;
  Positive sign                   : &quot;&quot;
  Positive sign position          : Before value and symbol
  Negative sign                   : &quot;-&quot;
  Negative sign position          : Before value and symbol
</pre></div>
</div>
<p>Poland (<code class="docutils literal notranslate"><span class="pre">pl_PL</span></code>):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ LANG=pl_PL LC_CTYPE=pl_PL LC_ALL=pl_PL python3 locale_env.py

Environment settings:
  LC_ALL = pl_PL
  LC_CTYPE = pl_PL
  LANG = pl_PL
  LANGUAGE =

Locale from environment: (&#39;pl_PL&#39;, &#39;ISO8859-2&#39;)

Numeric formatting:

  Decimal point      : &quot;,&quot;
  Grouping positions : [3, 3, 0]
  Thousands separator: &quot; &quot;

Monetary formatting:

  International currency symbol   : &quot;&#39;PLN &#39;&quot;
  Local currency symbol           : &#39;zł&#39;
  Symbol precedes positive value  : 1
  Symbol precedes negative value  : 1
  Decimal point                   : &quot;,&quot;
  Digits in fractional values     : 2
  Digits in fractional values,
                   international  : 2
  Grouping positions              : [3, 3, 0]
  Thousands separator             : &quot; &quot;
  Positive sign                   : &quot;&quot;
  Positive sign position          : After value
  Negative sign                   : &quot;-&quot;
  Negative sign position          : After value
</pre></div>
</div>
</div>
<div class="section" id="currency">
<h2>Currency<a class="headerlink" href="#currency" title="Permalink to this headline">¶</a></h2>
<p>The earlier example output shows that changing the locale updates the
currency symbol setting and the character to separate whole numbers
from decimal fractions.  This example loops through several different
locales to print a positive and negative currency value formatted for
each locale.</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">locale_currency.py</span><a class="headerlink" href="#id2" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">locale</span>

<span class="n">sample_locales</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="s1">&#39;USA&#39;</span><span class="p">,</span> <span class="s1">&#39;en_US&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;France&#39;</span><span class="p">,</span> <span class="s1">&#39;fr_FR&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;Spain&#39;</span><span class="p">,</span> <span class="s1">&#39;es_ES&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;Portugal&#39;</span><span class="p">,</span> <span class="s1">&#39;pt_PT&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;Poland&#39;</span><span class="p">,</span> <span class="s1">&#39;pl_PL&#39;</span><span class="p">),</span>
<span class="p">]</span>

<span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">loc</span> <span class="ow">in</span> <span class="n">sample_locales</span><span class="p">:</span>
    <span class="n">locale</span><span class="o">.</span><span class="n">setlocale</span><span class="p">(</span><span class="n">locale</span><span class="o">.</span><span class="n">LC_ALL</span><span class="p">,</span> <span class="n">loc</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:&gt;10}</span><span class="s1">: </span><span class="si">{:&gt;10}</span><span class="s1">  </span><span class="si">{:&gt;10}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">name</span><span class="p">,</span>
        <span class="n">locale</span><span class="o">.</span><span class="n">currency</span><span class="p">(</span><span class="mf">1234.56</span><span class="p">),</span>
        <span class="n">locale</span><span class="o">.</span><span class="n">currency</span><span class="p">(</span><span class="o">-</span><span class="mf">1234.56</span><span class="p">),</span>
    <span class="p">))</span>
</pre></div>
</div>
</div>
<p>The output is this small table:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ python3 locale_currency.py

       USA:   $1234.56   -$1234.56
    France: 1234,56 Eu  1234,56 Eu-
     Spain: 1234,56 Eu  -1234,56 Eu
  Portugal: 1234.56 Eu  -1234.56 Eu
    Poland: zł 1234,56  zł 1234,56-
</pre></div>
</div>
</div>
<div class="section" id="formatting-numbers">
<h2>Formatting Numbers<a class="headerlink" href="#formatting-numbers" title="Permalink to this headline">¶</a></h2>
<p>Numbers not related to currency are also formatted differently
depending on the locale.  In particular, the <code class="docutils literal notranslate"><span class="pre">grouping</span></code> character
used to separate large numbers into readable chunks changes.</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">locale_grouping.py</span><a class="headerlink" href="#id3" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">locale</span>

<span class="n">sample_locales</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="s1">&#39;USA&#39;</span><span class="p">,</span> <span class="s1">&#39;en_US&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;France&#39;</span><span class="p">,</span> <span class="s1">&#39;fr_FR&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;Spain&#39;</span><span class="p">,</span> <span class="s1">&#39;es_ES&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;Portugal&#39;</span><span class="p">,</span> <span class="s1">&#39;pt_PT&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;Poland&#39;</span><span class="p">,</span> <span class="s1">&#39;pl_PL&#39;</span><span class="p">),</span>
<span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:&gt;10}</span><span class="s1"> </span><span class="si">{:&gt;10}</span><span class="s1"> </span><span class="si">{:&gt;15}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
    <span class="s1">&#39;Locale&#39;</span><span class="p">,</span> <span class="s1">&#39;Integer&#39;</span><span class="p">,</span> <span class="s1">&#39;Float&#39;</span><span class="p">)</span>
<span class="p">)</span>
<span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">loc</span> <span class="ow">in</span> <span class="n">sample_locales</span><span class="p">:</span>
    <span class="n">locale</span><span class="o">.</span><span class="n">setlocale</span><span class="p">(</span><span class="n">locale</span><span class="o">.</span><span class="n">LC_ALL</span><span class="p">,</span> <span class="n">loc</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:&gt;10}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">locale</span><span class="o">.</span><span class="n">format_string</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%10d</span><span class="s1">&#39;</span><span class="p">,</span> <span class="mi">123456</span><span class="p">,</span> <span class="n">grouping</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">locale</span><span class="o">.</span><span class="n">format_string</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%15.2f</span><span class="s1">&#39;</span><span class="p">,</span> <span class="mf">123456.78</span><span class="p">,</span> <span class="n">grouping</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
</pre></div>
</div>
</div>
<p>To format numbers without the currency symbol, use <code class="docutils literal notranslate"><span class="pre">format_string()</span></code>
instead of <code class="docutils literal notranslate"><span class="pre">currency()</span></code>.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ python3 locale_grouping.py

    Locale    Integer           Float
       USA    123,456      123,456.78
    France     123456       123456,78
     Spain     123456       123456,78
  Portugal     123456       123456,78
    Poland    123 456      123 456,78
</pre></div>
</div>
<p>To convert locale-formatted numbers to a normalized locale-agnostic
format, use <code class="docutils literal notranslate"><span class="pre">delocalize()</span></code>.</p>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text">locale_delocalize.py</span><a class="headerlink" href="#id4" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">locale</span>

<span class="n">sample_locales</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="s1">&#39;USA&#39;</span><span class="p">,</span> <span class="s1">&#39;en_US&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;France&#39;</span><span class="p">,</span> <span class="s1">&#39;fr_FR&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;Spain&#39;</span><span class="p">,</span> <span class="s1">&#39;es_ES&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;Portugal&#39;</span><span class="p">,</span> <span class="s1">&#39;pt_PT&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;Poland&#39;</span><span class="p">,</span> <span class="s1">&#39;pl_PL&#39;</span><span class="p">),</span>
<span class="p">]</span>

<span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">loc</span> <span class="ow">in</span> <span class="n">sample_locales</span><span class="p">:</span>
    <span class="n">locale</span><span class="o">.</span><span class="n">setlocale</span><span class="p">(</span><span class="n">locale</span><span class="o">.</span><span class="n">LC_ALL</span><span class="p">,</span> <span class="n">loc</span><span class="p">)</span>
    <span class="n">localized</span> <span class="o">=</span> <span class="n">locale</span><span class="o">.</span><span class="n">format_string</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%0.2f</span><span class="s1">&#39;</span><span class="p">,</span> <span class="mf">123456.78</span><span class="p">,</span> <span class="n">grouping</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">delocalized</span> <span class="o">=</span> <span class="n">locale</span><span class="o">.</span><span class="n">delocalize</span><span class="p">(</span><span class="n">localized</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:&gt;10}</span><span class="s1">: </span><span class="si">{:&gt;10}</span><span class="s1">  </span><span class="si">{:&gt;10}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">name</span><span class="p">,</span>
        <span class="n">localized</span><span class="p">,</span>
        <span class="n">delocalized</span><span class="p">,</span>
    <span class="p">))</span>
</pre></div>
</div>
</div>
<p>Grouping punctuation is removed and the decimal separator is converted
to always be a <code class="docutils literal notranslate"><span class="pre">.</span></code>.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ python3 locale_delocalize.py

       USA: 123,456.78   123456.78
    France:  123456,78   123456.78
     Spain:  123456,78   123456.78
  Portugal:  123456,78   123456.78
    Poland: 123 456,78   123456.78
</pre></div>
</div>
</div>
<div class="section" id="parsing-numbers">
<h2>Parsing Numbers<a class="headerlink" href="#parsing-numbers" title="Permalink to this headline">¶</a></h2>
<p>Besides generating output in different formats, the <code class="docutils literal notranslate"><span class="pre">locale</span></code>
module helps with parsing input. It includes <code class="docutils literal notranslate"><span class="pre">atoi()</span></code> and
<code class="docutils literal notranslate"><span class="pre">atof()</span></code> functions for converting the strings to integer and
floating point values based on the locale’s numerical formatting
conventions.</p>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text">locale_atof.py</span><a class="headerlink" href="#id5" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">locale</span>

<span class="n">sample_data</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="s1">&#39;USA&#39;</span><span class="p">,</span> <span class="s1">&#39;en_US&#39;</span><span class="p">,</span> <span class="s1">&#39;1,234.56&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;France&#39;</span><span class="p">,</span> <span class="s1">&#39;fr_FR&#39;</span><span class="p">,</span> <span class="s1">&#39;1234,56&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;Spain&#39;</span><span class="p">,</span> <span class="s1">&#39;es_ES&#39;</span><span class="p">,</span> <span class="s1">&#39;1234,56&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;Portugal&#39;</span><span class="p">,</span> <span class="s1">&#39;pt_PT&#39;</span><span class="p">,</span> <span class="s1">&#39;1234.56&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;Poland&#39;</span><span class="p">,</span> <span class="s1">&#39;pl_PL&#39;</span><span class="p">,</span> <span class="s1">&#39;1 234,56&#39;</span><span class="p">),</span>
<span class="p">]</span>

<span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">loc</span><span class="p">,</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">sample_data</span><span class="p">:</span>
    <span class="n">locale</span><span class="o">.</span><span class="n">setlocale</span><span class="p">(</span><span class="n">locale</span><span class="o">.</span><span class="n">LC_ALL</span><span class="p">,</span> <span class="n">loc</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:&gt;10}</span><span class="s1">: </span><span class="si">{:&gt;9}</span><span class="s1"> =&gt; </span><span class="si">{:f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">name</span><span class="p">,</span>
        <span class="n">a</span><span class="p">,</span>
        <span class="n">locale</span><span class="o">.</span><span class="n">atof</span><span class="p">(</span><span class="n">a</span><span class="p">),</span>
    <span class="p">))</span>
</pre></div>
</div>
</div>
<p>The grouping and decimal separator values of the locale are recognized
by the parser.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ python3 locale_atof.py

       USA:  1,234.56 =&gt; 1234.560000
    France:   1234,56 =&gt; 1234.560000
     Spain:   1234,56 =&gt; 1234.560000
  Portugal:   1234.56 =&gt; 1234.560000
    Poland:  1 234,56 =&gt; 1234.560000
</pre></div>
</div>
</div>
<div class="section" id="dates-and-times">
<h2>Dates and Times<a class="headerlink" href="#dates-and-times" title="Permalink to this headline">¶</a></h2>
<p>Another important aspect of localization is date and time formatting.</p>
<div class="literal-block-wrapper docutils container" id="id6">
<div class="code-block-caption"><span class="caption-text">locale_date.py</span><a class="headerlink" href="#id6" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">locale</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="n">sample_locales</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="s1">&#39;USA&#39;</span><span class="p">,</span> <span class="s1">&#39;en_US&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;France&#39;</span><span class="p">,</span> <span class="s1">&#39;fr_FR&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;Spain&#39;</span><span class="p">,</span> <span class="s1">&#39;es_ES&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;Portugal&#39;</span><span class="p">,</span> <span class="s1">&#39;pt_PT&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;Poland&#39;</span><span class="p">,</span> <span class="s1">&#39;pl_PL&#39;</span><span class="p">),</span>
<span class="p">]</span>

<span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">loc</span> <span class="ow">in</span> <span class="n">sample_locales</span><span class="p">:</span>
    <span class="n">locale</span><span class="o">.</span><span class="n">setlocale</span><span class="p">(</span><span class="n">locale</span><span class="o">.</span><span class="n">LC_ALL</span><span class="p">,</span> <span class="n">loc</span><span class="p">)</span>
    <span class="nb">format</span> <span class="o">=</span> <span class="n">locale</span><span class="o">.</span><span class="n">nl_langinfo</span><span class="p">(</span><span class="n">locale</span><span class="o">.</span><span class="n">D_T_FMT</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:&gt;10}</span><span class="s1">: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="nb">format</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<p>This example uses the date formatting string for the locale to print
the current date and time.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ python3 locale_date.py

       USA: Sun Dec  9 12:20:00 2018
    France: Dim  9 déc 12:20:00 2018
     Spain: dom  9 dic 12:20:00 2018
  Portugal: Dom  9 Dez 12:20:00 2018
    Poland: ndz  9 gru 12:20:00 2018
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<ul class="last simple">
<li><a class="reference external" href="https://docs.python.org/3.7/library/locale.html">Standard library documentation for locale</a></li>
<li><a class="reference internal" href="../porting_notes.html#porting-locale"><span class="std std-ref">Python 2 to 3 porting notes for locale</span></a></li>
<li><a class="reference internal" href="../gettext/index.html#module-gettext" title="gettext: Message Catalogs"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gettext</span></code></a> – Message catalogs for translations.</li>
</ul>
</div>
</div>
</div>



        <div id="footer-nav">
<a id="prev-link" href="../gettext/index.html"
   title="previous chapter"><i class="fa fa-arrow-circle-left"></i> gettext — Message Catalogs</a>
<a id="next-link" href="../dev_tools.html"
   title="next chapter">Developer Tools <i class="fa fa-arrow-circle-right"></i></a>
        </div>

        </div>
      </div>

      <div class="pure-u-1-4">
        <div class="sidebar-wrapper">
          <div class="sidebar">
<div id="sidebar-toc">
  <h5>Quick Links</h5>
  <ul>
    
    <li><a href="#probing-the-current-locale"><i class="fa fa-caret-right"></i>Probing the Current Locale</a></li>
    
    <li><a href="#currency"><i class="fa fa-caret-right"></i>Currency</a></li>
    
    <li><a href="#formatting-numbers"><i class="fa fa-caret-right"></i>Formatting Numbers</a></li>
    
    <li><a href="#parsing-numbers"><i class="fa fa-caret-right"></i>Parsing Numbers</a></li>
    
    <li><a href="#dates-and-times"><i class="fa fa-caret-right"></i>Dates and Times</a></li>
    
  </ul>
</div>

          </div>
          <div class="sidebar"><div id="sidebar-last-updated">
  This page was last updated 2018-12-09.
</div>

          </div>
          <div class="sidebar">
<div id="sidebar-nav">
  <h5>Navigation</h5>
  <ul>
    <li><a href="../gettext/index.html"
           title="previous chapter"><i class="fa fa-arrow-circle-left"></i>gettext — Message Catalogs</a></li>
    <li><a href="../dev_tools.html"
           title="next chapter"><i class="fa fa-arrow-circle-right"></i>Developer Tools</a></li>
  </ul>
</div>
          </div>
          <div class="sidebar"><div id="sidebar-book"><a target="new" href="https://doughellmann.com/blog/the-python-3-standard-library-by-example/"><img src="../_static/book-cover-image-med.jpg"><br>Get the book</a></div>
          </div>
          <div class="sidebar"><div id="sidebar-example-disclaimer">
<p>The output from all the example programs
from PyMOTW-3 has been generated with Python 3.7.9, unless
otherwise noted. Some of the features described here may not be
available in earlier versions of Python.</p>
<p>Looking for <a href="/2/">examples for Python 2</a>?</p>
</div>
          </div>

        </div>
      </div>

    </div>

    <div class="pure-g-r" id="footer">

      <div class="pure-u-1-3">
        <div class="footer-list">
            <h4>This Site</h4>
            <ul>
              <li><a href="../py-modindex.html"><i class="fa fa-list fa-lg"></i> Module Index</a></li>
              <li><a href="../genindex.html"><i class="fa fa-italic fa-lg"></i> Index</a></li>
            </ul>
        </div>
      </div><div class="pure-u-1-3">
          <div class="footer-content">
            <div class="socialmedia">
              <a class="sociallink" href="../index.html"
       title="Home">
      <i class="fa fa-home fa-lg"></i></a>
              <a class="sociallink" href="../about.html"
       title="About">
      <i class="fa fa-user fa-lg"></i></a>
              <a class="sociallink" href="http://www.twitter.com/pymotw"
       title="Twitter">
      <i class="fa fa-twitter fa-lg"></i></a>
              <a class="sociallink" href="http://feeds.doughellmann.com/PyMOTW"
       title="Subscribe via RSS">
      <i class="fa fa-rss-square fa-lg"></i></a>
              <a class="sociallink" href="http://feedburner.google.com/fb/a/mailverify?uri=PyMOTW&amp;loc=en_US"
       title="Subscribe via Email">
      <i class="fa fa-envelope fa-lg"></i></a>
            </div>

            <div class="copyright">
              <a rel="author" href="../about.html">&copy; Copyright 2021, Doug Hellmann</a>
            </div>

            <div class="cc"><a href="http://creativecommons.org/licenses/by-nc-sa/4.0/deed.en_US" rel="license"><img alt="Creative Commons License BY-NC-SA" style="border-width:0; align: center;" width="88" height="31" src="data:image/png;base64,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"/></a>
            </div>

          </div></div><div class="pure-u-1-3">
          <div class="footer-list">
            <h4>Other Writing</h4>
            <ul>
              <li><a href="https://doughellmann.com/"><i class="fa fa-pencil fa-lg"></i> Blog</a></li>
              <li><a href="https://doughellmann.com/blog/the-python-standard-library-by-example/"><i class="fa fa-book fa-lg"></i> The Python Standard Library By Example</a></li>
            </ul>
          </div>
        </div><script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-38546875-3', 'pymotw.com');
  ga('send', 'pageview');
</script>

  </body>
</html>